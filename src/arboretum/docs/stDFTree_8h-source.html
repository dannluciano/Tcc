<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stDFTree.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<h1>GBDI Arboretum<br><small>Version Release 1</small></h1>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>stDFTree.h</h1><a href="stDFTree_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/**********************************************************************</span>
00002 <span class="comment">* GBDI Arboretum - Copyright (c) 2002-2004 GBDI-ICMC-USP</span>
00003 <span class="comment">*</span>
00004 <span class="comment">*                           Homepage: http://gbdi.icmc.usp.br/arboretum</span>
00005 <span class="comment">**********************************************************************/</span>
00006 <span class="comment">/* ====================================================================</span>
00007 <span class="comment"> * The GBDI-ICMC-USP Software License Version 1.0</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Copyright (c) 2004 Grupo de Bases de Dados e Imagens, Instituto de</span>
00010 <span class="comment"> * Ciências Matemáticas e de Computação, University of São Paulo -</span>
00011 <span class="comment"> * Brazil (the Databases and Image Group - Intitute of Matematical and </span>
00012 <span class="comment"> * Computer Sciences).  All rights reserved.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00015 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00016 <span class="comment"> * are met:</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00019 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00022 <span class="comment"> *    notice, this list of conditions and the following disclaimer in</span>
00023 <span class="comment"> *    the documentation and/or other materials provided with the</span>
00024 <span class="comment"> *    distribution.</span>
00025 <span class="comment"> *</span>
00026 <span class="comment"> * 3. The end-user documentation included with the redistribution,</span>
00027 <span class="comment"> *    if any, must include the following acknowledgment:</span>
00028 <span class="comment"> *       "This product includes software developed by Grupo de Bases</span>
00029 <span class="comment"> *        de Dados e Imagens, Instituto de Ciências Matemáticas e de</span>
00030 <span class="comment"> *        Computação, University of São Paulo - Brazil (the Databases </span>
00031 <span class="comment"> *        and Image Group - Intitute of Matematical and Computer</span>
00032 <span class="comment"> *        Sciences)"</span>
00033 <span class="comment"> *</span>
00034 <span class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</span>
00035 <span class="comment"> *    if and wherever such third-party acknowledgments normally appear.</span>
00036 <span class="comment"> *</span>
00037 <span class="comment"> * 4. The names of the research group, institute, university, authors</span>
00038 <span class="comment"> *    and collaborators must not be used to endorse or promote products</span>
00039 <span class="comment"> *    derived from this software without prior written permission.</span>
00040 <span class="comment"> *</span>
00041 <span class="comment"> * 5. The names of products derived from this software may not contain</span>
00042 <span class="comment"> *    the name of research group, institute or university, without prior</span>
00043 <span class="comment"> *    written permission of the authors of this software.</span>
00044 <span class="comment"> *</span>
00045 <span class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</span>
00046 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
00047 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
00048 <span class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OF THIS SOFTWARE OR</span>
00049 <span class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
00050 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
00051 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
00052 <span class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
00053 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
00054 <span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
00055 <span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
00056 <span class="comment"> * SUCH DAMAGE.</span>
00057 <span class="comment"> *</span>
00058 <span class="comment"> * ====================================================================</span>
00059 <span class="comment"> *                                            http://gbdi.icmc.usp.br/</span>
00060 <span class="comment"> */</span>
00073 <span class="comment">// Copyright (c) 2003 GBDI-ICMC-USP</span>
00074 
00075 <span class="preprocessor">#ifndef __STDFTREE_H</span>
00076 <span class="preprocessor"></span><span class="preprocessor">#define __STDFTREE_H</span>
00077 <span class="preprocessor"></span>
00078 <span class="preprocessor">#include &lt;<a class="code" href="stUtil_8h.html">arboretum/stUtil.h</a>&gt;</span>
00079 <span class="preprocessor">#include &lt;<a class="code" href="stTypes_8h.html">arboretum/stTypes.h</a>&gt;</span>
00080 <span class="preprocessor">#include &lt;<a class="code" href="stMetricTree_8h.html">arboretum/stMetricTree.h</a>&gt;</span>
00081 <span class="preprocessor">#include &lt;<a class="code" href="stDFNode_8h.html">arboretum/stDFNode.h</a>&gt;</span>
00082 <span class="preprocessor">#include &lt;<a class="code" href="stPageManager_8h.html">arboretum/stPageManager.h</a>&gt;</span>
00083 <span class="preprocessor">#include &lt;<a class="code" href="stGenericPriorityQueue_8h.html">arboretum/stGenericPriorityQueue.h</a>&gt;</span>
00084 
00085 <span class="comment">// this is used to set the initial size of the dynamic queue</span>
<a name="l00086"></a><a class="code" href="stDFTree_8h.html#a0">00086</a> <span class="preprocessor">#define STARTVALUEQUEUE 200</span>
00087 <span class="preprocessor"></span><span class="comment">// this is used to set the increment size of the dynamic queue</span>
<a name="l00088"></a><a class="code" href="stDFTree_8h.html#a1">00088</a> <span class="preprocessor">#define INCREMENTVALUEQUEUE 200</span>
00089 <span class="preprocessor"></span><span class="comment">// this is used to set GR Vector</span>
<a name="l00090"></a><a class="code" href="stDFTree_8h.html#a2">00090</a> <span class="preprocessor">#define STFOCUS 3</span>
00091 <span class="preprocessor"></span>
00092 <span class="preprocessor">#include &lt;string.h&gt;</span>
00093 <span class="preprocessor">#include &lt;math.h&gt;</span>
00094 <span class="preprocessor">#include &lt;values.h&gt;</span>
00095 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00096 
00097 <span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
00098 <span class="keyword">class </span><a class="code" href="classstDFGlobalRep.html">stDFGlobalRep</a>;
00099 
00100 <span class="comment">//=============================================================================</span>
00101 <span class="comment">// Class template stDFLogicNode</span>
00102 <span class="comment">//-----------------------------------------------------------------------------</span>
00124 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00125"></a><a class="code" href="classstDFLogicNode.html">00125</a> <span class="keyword">class </span><a class="code" href="classstDFLogicNode.html">stDFLogicNode</a>{
00126 
00127    <span class="keyword">public</span>:
00128 
<a name="l00132"></a><a class="code" href="classstDFLogicNode.html#w0">00132</a>       <span class="keyword">typedef</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt; <a class="code" href="classstDFGlobalRep.html">tGR</a>;
00133 
00139       <a class="code" href="classstDFLogicNode.html#a0">stDFLogicNode</a>(<a class="code" href="group__types.html#a7">stCount</a> maxOccupation);
00140 
00146       <a class="code" href="classstDFLogicNode.html#a1">~stDFLogicNode</a>();
00147 
<a name="l00157"></a><a class="code" href="classstDFLogicNode.html#a2">00157</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a2">AddEntry</a>(ObjectType * obj){
00158          Entries[Count].Object = obj;
00159          Entries[Count].Mine = <span class="keyword">true</span>;
00160          Entries[Count].FieldDistance  = <span class="keyword">new</span> <a class="code" href="group__types.html#a6">stDistance</a>[<a class="code" href="stDFNode_8h.html#a0">STFOCUS</a>];
00161          Count++;
00162          <span class="keywordflow">return</span> Count - 1;
00163       }<span class="comment">//end AddEntry</span>
00164 
00174       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a2">AddEntry</a>(<a class="code" href="group__types.html#a5">stSize</a> size, <span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * object);
00175 
<a name="l00179"></a><a class="code" href="classstDFLogicNode.html#a4">00179</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstDFLogicNode.html#a4">GetNumberOfEntries</a>(){
00180          <span class="keywordflow">return</span> Count;
00181       }<span class="comment">//end GetNumberOfEntries</span>
00182 
<a name="l00188"></a><a class="code" href="classstDFLogicNode.html#a5">00188</a>       ObjectType * <a class="code" href="classstDFLogicNode.html#a5">GetObject</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00189          <span class="keywordflow">return</span> Entries[idx].Object;
00190       }<span class="comment">//end GetObject</span>
00191 
<a name="l00197"></a><a class="code" href="classstDFLogicNode.html#a6">00197</a>       ObjectType * <a class="code" href="classstDFLogicNode.html#a6">operator []</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00198          <span class="keywordflow">return</span> Entries[idx].Object;
00199       }<span class="comment">//end operator []</span>
00200 
<a name="l00206"></a><a class="code" href="classstDFLogicNode.html#a7">00206</a>       <a class="code" href="group__types.html#a4">stPageID</a> <a class="code" href="classstDFLogicNode.html#a7">GetPageID</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00207          <span class="keywordflow">return</span> Entries[idx].PageID;
00208       }<span class="comment">//end GetPageID</span>
00209 
<a name="l00216"></a><a class="code" href="classstDFLogicNode.html#a8">00216</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstDFLogicNode.html#a8">GetNEntries</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00217          <span class="keywordflow">return</span> Entries[idx].NEntries;
00218       }<span class="comment">//end GetNEntries</span>
00219 
<a name="l00226"></a><a class="code" href="classstDFLogicNode.html#a9">00226</a>       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstDFLogicNode.html#a9">GetRadius</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00227          <span class="keywordflow">return</span> Entries[idx].Radius;
00228       }<span class="comment">//end GetRadius</span>
00229 
<a name="l00239"></a><a class="code" href="classstDFLogicNode.html#a10">00239</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a10">SetEntry</a>(<a class="code" href="group__types.html#a7">stCount</a> idx, <a class="code" href="group__types.html#a4">stPageID</a> pageID, <a class="code" href="group__types.html#a5">stSize</a> nEntries,
00240                     <a class="code" href="group__types.html#a6">stDistance</a> radius, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance){
00241          Entries[idx].PageID = pageID;
00242          Entries[idx].NEntries = nEntries;
00243          Entries[idx].Radius = radius;
00244          memcpy(Entries[idx].FieldDistance, fieldDistance, 3 * <span class="keyword">sizeof</span>(<a class="code" href="group__types.html#a6">stDistance</a>));
00245       }<span class="comment">//end GetPageID</span>
00246 
00253       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a11">AddIndexNode</a>(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node);
00254 
00261       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a12">AddLeafNode</a>(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node);
00262 
<a name="l00268"></a><a class="code" href="classstDFLogicNode.html#a13">00268</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstDFLogicNode.html#a13">GetRepresentativeIndex</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00269          <span class="keywordflow">return</span> RepIndex[idx];
00270       }<span class="comment">//end GetRepresentativeIndex</span>
00271 
<a name="l00277"></a><a class="code" href="classstDFLogicNode.html#a14">00277</a>       ObjectType * <a class="code" href="classstDFLogicNode.html#a14">GetRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00278         <span class="keywordflow">return</span> Entries[RepIndex[idx]].Object;
00279       }<span class="comment">//end GetRepresentative</span>
00280 
<a name="l00288"></a><a class="code" href="classstDFLogicNode.html#a15">00288</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a15">SetRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> rep0, <a class="code" href="group__types.html#a7">stCount</a> rep1){
00289          RepIndex[0] = rep0;
00290          RepIndex[1] = rep1;
00291       }<span class="comment">//end SetRepresentative</span>
00292 
<a name="l00306"></a><a class="code" href="classstDFLogicNode.html#a16">00306</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a16">Distribute</a>(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node0, ObjectType * &amp; rep0,
00307             <a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node1, ObjectType * &amp; rep1,
00308             EvaluatorType * metricEvaluator, <a class="code" href="classstDFGlobalRep.html">tGR</a> * GR){
00309          <span class="keywordtype">int</span> result;
00310 
00311          <span class="comment">// Distribute...</span>
00312          result = <a class="code" href="classstDFLogicNode.html#a18">TestDistribution</a>(node0, node1, metricEvaluator);
00313 
00314          <span class="comment">// Representatives</span>
00315          rep0 = <a class="code" href="classstDFLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstDFLogicNode.html#a13">GetRepresentativeIndex</a>(0));
00316          rep1 = <a class="code" href="classstDFLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstDFLogicNode.html#a13">GetRepresentativeIndex</a>(1));
00317 
00318          <span class="keywordflow">return</span> result;
00319       }<span class="comment">//end Distribute</span>
00320 
<a name="l00334"></a><a class="code" href="classstDFLogicNode.html#a17">00334</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a16">Distribute</a>(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node0, ObjectType * &amp; rep0,
00335             <a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node1, ObjectType * &amp; rep1,
00336             EvaluatorType * metricEvaluator, <a class="code" href="classstDFGlobalRep.html">tGR</a> * GR){
00337          <span class="keywordtype">int</span> result;
00338 
00339          <span class="comment">// Distribute...</span>
00340          result = <a class="code" href="classstDFLogicNode.html#a18">TestDistribution</a>(node0, node1, metricEvaluator);
00341 
00342          <span class="comment">// Representatives</span>
00343          rep0 = <a class="code" href="classstDFLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstDFLogicNode.html#a13">GetRepresentativeIndex</a>(0));
00344          rep1 = <a class="code" href="classstDFLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstDFLogicNode.html#a13">GetRepresentativeIndex</a>(1));
00345 
00346          <span class="keywordflow">return</span> result;
00347       }<span class="comment">//end Distribute</span>
00348 
00361       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a18">TestDistribution</a>(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node0, <a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node1,
00362             EvaluatorType * metricEvaluator);
00363 
00374       <span class="keywordtype">int</span> <a class="code" href="classstDFLogicNode.html#a18">TestDistribution</a>(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node0, <a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node1,
00375             EvaluatorType * metricEvaluator);
00376 
<a name="l00381"></a><a class="code" href="classstDFLogicNode.html#a20">00381</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a20">SetMinOccupation</a>(<a class="code" href="group__types.html#a7">stCount</a> min){
00382          MinOccupation = min;
00383          <span class="comment">// At least the nodes must store 2 objects.</span>
00384          <span class="keywordflow">if</span> ((MinOccupation &gt; (MaxEntries/2)) || (MinOccupation == 0)){
00385             MinOccupation = 2;
00386          }<span class="comment">//end if</span>
00387       }<span class="comment">//end SetMinOccupation</span>
00388 
<a name="l00393"></a><a class="code" href="classstDFLogicNode.html#a21">00393</a>       <a class="code" href="group__types.html#a8">stNodeType</a> <a class="code" href="classstDFLogicNode.html#a21">GetNodeType</a>(){
00394          <span class="keywordflow">return</span> NodeType;
00395       }<span class="comment">//end GetNodeType</span>
00396 
<a name="l00400"></a><a class="code" href="classstDFLogicNode.html#a22">00400</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a22">SetNodeType</a>(<a class="code" href="group__types.html#a8">stNodeType</a> type){
00401          NodeType = type;
00402       }<span class="comment">//end SetNodeType</span>
00403 
<a name="l00410"></a><a class="code" href="classstDFLogicNode.html#a23">00410</a>       <span class="keywordtype">bool</span> <a class="code" href="classstDFLogicNode.html#a23">IsRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00411          <span class="keywordflow">return</span> ((idx == RepIndex[0]) || (idx == RepIndex[1]));
00412       }<span class="comment">//end IsRepresentative</span>
00413 
<a name="l00425"></a><a class="code" href="classstDFLogicNode.html#a24">00425</a>       ObjectType * <a class="code" href="classstDFLogicNode.html#a24">BuyObject</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00426          Entries[idx].Mine = <span class="keyword">false</span>;
00427          <span class="keywordflow">return</span> Entries[idx].Object;
00428       }<span class="comment">//end BuyObject</span>
00429 
<a name="l00436"></a><a class="code" href="classstDFLogicNode.html#a25">00436</a>       <a class="code" href="group__types.html#a6">stDistance</a> * <a class="code" href="classstDFLogicNode.html#a25">GetFieldDistance</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00437          <span class="keywordflow">return</span> Entries[idx].FieldDistance;
00438       }<span class="comment">//end GetFieldDistance</span>
00439 
<a name="l00447"></a><a class="code" href="classstDFLogicNode.html#a26">00447</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a26">SetFocusDistance</a>(<a class="code" href="group__types.html#a7">stCount</a> idx, <a class="code" href="group__types.html#a7">stCount</a> iGlobalRep, <a class="code" href="group__types.html#a6">stDistance</a> iFieldDistance){
00448          Entries[idx].FieldDistance[iGlobalRep] = iFieldDistance;
00449       }<span class="comment">//end SetFocusDistance</span>
00450 
<a name="l00457"></a><a class="code" href="classstDFLogicNode.html#a27">00457</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFLogicNode.html#a27">SetFieldDistance</a>(<a class="code" href="group__types.html#a7">stCount</a> idx, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance){
00458          memcpy(Entries[idx].FieldDistance, fieldDistance, 3 * <span class="keyword">sizeof</span>(<a class="code" href="group__types.html#a6">stDistance</a>));
00459       }<span class="comment">//end SetFieldDistance</span>
00460 
00461    <span class="keyword">private</span>:
00462 
00466       <span class="keyword">struct </span>stDFLogicEntry{
00467 
00471          ObjectType * Object;
00472 
00476          <a class="code" href="group__types.html#a4">stPageID</a> PageID;
00477 
00481          <a class="code" href="group__types.html#a7">stCount</a> NEntries;
00482 
00486          <a class="code" href="group__types.html#a6">stDistance</a> Radius;
00487 
00491          <span class="keywordtype">bool</span> Mine;
00492 
00496          <a class="code" href="group__types.html#a6">stDistance</a> Distance[2];
00497 
00501          <a class="code" href="group__types.html#a6">stDistance</a> * FieldDistance;
00502 
00506          <span class="keywordtype">bool</span> Mapped;
00507       };
00508 
00512       <span class="keyword">struct </span><a class="code" href="classstDFLogicEntry.html">stDFLogicEntry</a> * Entries;
00513 
00517       <a class="code" href="group__types.html#a7">stCount</a> MinOccupation;
00518 
00522       <a class="code" href="group__types.html#a7">stCount</a> MaxEntries;
00523 
00527       <a class="code" href="group__types.html#a7">stCount</a> Count;
00528 
00532       <a class="code" href="group__types.html#a7">stCount</a> RepIndex[2];
00533 
00537       <span class="keywordtype">int</span> NodeType;
00538 
00545       <span class="keywordtype">int</span> UpdateDistances(EvaluatorType * metricEvaluator);
00546       
00547 };<span class="comment">//end stDFLogicNode</span>
00548 
00549 <span class="comment">//=============================================================================</span>
00550 <span class="comment">// Class template stDFMSTSpliter</span>
00551 <span class="comment">//-----------------------------------------------------------------------------</span>
00564 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00565"></a><a class="code" href="classstDFMSTSplitter.html">00565</a> <span class="keyword">class </span><a class="code" href="classstDFMSTSplitter.html">stDFMSTSplitter</a>{
00566 
00567    <span class="keyword">public</span>:
00568 
<a name="l00572"></a><a class="code" href="classstDFMSTSplitter.html#w0">00572</a>       <span class="keyword">typedef</span> stDFLogicNode &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstDFLogicNode.html">tLogicNode</a>;
00573 
<a name="l00577"></a><a class="code" href="classstDFMSTSplitter.html#w1">00577</a>       <span class="keyword">typedef</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt; <a class="code" href="classstDFGlobalRep.html">tGR</a>;
00578 
00583       <a class="code" href="classstDFMSTSplitter.html#a0">stDFMSTSplitter</a>(<a class="code" href="classstDFLogicNode.html">tLogicNode</a> * node);
00584 
00588       <a class="code" href="classstDFMSTSplitter.html#a1">~stDFMSTSplitter</a>();
00589 
<a name="l00593"></a><a class="code" href="classstDFMSTSplitter.html#a2">00593</a>       <span class="keyword">const</span> <a class="code" href="classstDFLogicNode.html">tLogicNode</a> * <a class="code" href="classstDFMSTSplitter.html#a2">GetLogicNode</a>(){
00594          <span class="keywordflow">return</span> <a class="code" href="classstDFMSTSplitter.html#p1">Node</a>;
00595       }<span class="comment">//end GetLogicNode</span>
00596 
00601       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#a3">Distribute</a>(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node0, ObjectType * &amp; rep0,
00602             <a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node1, ObjectType * &amp; rep1,
00603             EvaluatorType * metricEvaluator, tGR * GR);
00604 
00608       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#a3">Distribute</a>(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node0, ObjectType * &amp; rep0,
00609             <a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node1, ObjectType * &amp; rep1,
00610             EvaluatorType * metricEvaluator, tGR * GR);
00611 
00612    <span class="keyword">protected</span>:
00613 
<a name="l00614"></a><a class="code" href="classstDFMSTSplitter.html#p0">00614</a>       <span class="keyword">friend</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt;;
00615 
<a name="l00619"></a><a class="code" href="classstDFMSTSplitter.html#x0">00619</a>       <span class="keyword">typedef</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt; <a class="code" href="classstDFGlobalRep.html">tGR</a>;
00620 
<a name="l00624"></a><a class="code" href="classstDFMSTSplitter.html#x1">00624</a>       <span class="keyword">typedef</span> stGenericMatrix &lt;stDistance&gt; <a class="code" href="classstGenericMatrix.html">tDistanceMatrix</a>;
00625 
<a name="l00629"></a><a class="code" href="classstDFMSTSplitter.html#x5">00629</a>       <span class="keyword">enum</span> <a class="code" href="classstDFMSTSplitter.html#x5">tClusterState</a>{
00630          <a class="code" href="classstDFMSTSplitter.html#x5x2">ALIVE</a>,
00631          <a class="code" href="classstDFMSTSplitter.html#x5x3">DEAD</a>,
00632          <a class="code" href="classstDFMSTSplitter.html#x5x4">DEATH_SENTENCE</a>
00633       };<span class="comment">//end tClusterState</span>
00634 
<a name="l00638"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html">00638</a>       <span class="keyword">struct </span><a class="code" href="structstDFMSTSplitter_1_1tCluster.html">tCluster</a>{
<a name="l00642"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o0">00642</a>          <span class="keyword">enum</span> tClusterState <a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o0">State</a>;
00643 
<a name="l00647"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o1">00647</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o1">Size</a>;
00648 
<a name="l00652"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o2">00652</a>          <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o2">MinDist</a>;
00653 
<a name="l00657"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o3">00657</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o3">Src</a>;
00658 
<a name="l00662"></a><a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o4">00662</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFMSTSplitter_1_1tCluster.html#o4">Dst</a>;
00663       };
00664 
<a name="l00668"></a><a class="code" href="classstDFMSTSplitter.html#p1">00668</a>       <a class="code" href="classstDFLogicNode.html">tLogicNode</a> * <a class="code" href="classstDFMSTSplitter.html#p1">Node</a>;
00669 
<a name="l00673"></a><a class="code" href="classstDFMSTSplitter.html#p2">00673</a>       <a class="code" href="classstGenericMatrix.html">tDistanceMatrix</a> <a class="code" href="classstDFMSTSplitter.html#p2">DMat</a>;
00674 
<a name="l00678"></a><a class="code" href="classstDFMSTSplitter.html#p3">00678</a>       <span class="keyword">struct </span><a class="code" href="structstDFMSTSplitter_1_1tCluster.html">tCluster</a> * <a class="code" href="classstDFMSTSplitter.html#p3">Cluster</a>;
00679 
<a name="l00683"></a><a class="code" href="classstDFMSTSplitter.html#p4">00683</a>       <span class="keywordtype">int</span> * <a class="code" href="classstDFMSTSplitter.html#p4">ObjectCluster</a>;
00684 
<a name="l00688"></a><a class="code" href="classstDFMSTSplitter.html#p5">00688</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#p5">N</a>;
00689 
<a name="l00693"></a><a class="code" href="classstDFMSTSplitter.html#p6">00693</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#p6">Cluster0</a>;
00694 
<a name="l00698"></a><a class="code" href="classstDFMSTSplitter.html#p7">00698</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#p7">Cluster1</a>;
00699 
00706       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#b0">FindCenter</a>(<span class="keywordtype">int</span> clus);
00707 
<a name="l00714"></a><a class="code" href="classstDFMSTSplitter.html#b1">00714</a>       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstDFMSTSplitter.html#b1">GetMatrixDistance</a>(<span class="keywordtype">int</span> idi, <span class="keywordtype">int</span> idj){
00715          <span class="keywordflow">return</span> <a class="code" href="classstDFMSTSplitter.html#p2">DMat</a>[idi][idj];
00716       }<span class="comment">//end GetDistance</span>
00717 
00718 
00725       <span class="keywordtype">int</span> <a class="code" href="classstDFMSTSplitter.html#b2">BuildDistanceMatrix</a>(EvaluatorType * metricEvaluator);
00726 
00735       <span class="keywordtype">void</span> <a class="code" href="classstDFMSTSplitter.html#b3">PerformMST</a>(tGR * GR);
00736 
00745       <span class="keywordtype">void</span> <a class="code" href="classstDFMSTSplitter.html#b4">JoinClusters</a>(<span class="keywordtype">int</span> cluster1, <span class="keywordtype">int</span> cluster2);
00746       
00747 };<span class="comment">//end stDFMSTSplitter</span>
00748 
00749 
00750 <span class="comment">//=============================================================================</span>
00751 <span class="comment">// Class template stDFTree</span>
00752 <span class="comment">//-----------------------------------------------------------------------------</span>
00772 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00773"></a><a class="code" href="classstDFTree.html">00773</a> <span class="keyword">class </span><a class="code" href="classstDFTree.html">stDFTree</a>: <span class="keyword">public</span> <a class="code" href="classstMetricTree.html">stMetricTree</a>&lt; ObjectType, EvaluatorType&gt;{
00774 
00775    <span class="keyword">public</span>:
00776 
<a name="l00781"></a><a class="code" href="structstDFTree_1_1tDFHeader.html">00781</a>       <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structstDFTree_1_1tDFHeader.html">tDFHeader</a>{
<a name="l00787"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o0">00787</a>          <span class="keywordtype">char</span> <a class="code" href="structstDFTree_1_1tDFHeader.html#o0">Magic</a>[4];
00788 
<a name="l00792"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o1">00792</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFTree_1_1tDFHeader.html#o1">SplitMethod</a>;
00793 
<a name="l00797"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o2">00797</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFTree_1_1tDFHeader.html#o2">ChooseMethod</a>;
00798 
<a name="l00802"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o3">00802</a>          <span class="keywordtype">int</span> <a class="code" href="structstDFTree_1_1tDFHeader.html#o3">CorrectMethod</a>;
00803 
<a name="l00807"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o4">00807</a>          <a class="code" href="group__types.html#a4">stPageID</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o4">Root</a>;
00808 
<a name="l00812"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o5">00812</a>          <a class="code" href="group__types.html#a4">stPageID</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o5">RootGlobalRep</a>;
00813 
<a name="l00817"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o6">00817</a>          <span class="keywordtype">double</span> <a class="code" href="structstDFTree_1_1tDFHeader.html#o6">MinOccupation</a>;
00818 
<a name="l00822"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o7">00822</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o7">MaxOccupation</a>;
00823 
<a name="l00827"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o8">00827</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o8">Height</a>;
00828 
<a name="l00832"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o9">00832</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o9">ObjectCount</a>;
00833 
<a name="l00837"></a><a class="code" href="structstDFTree_1_1tDFHeader.html#o10">00837</a>          <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="structstDFTree_1_1tDFHeader.html#o10">NodeCount</a>;
00838       } <a class="code" href="structstDFTree_1_1tDFHeader.html">stDFHeader</a>;
00839 
<a name="l00843"></a><a class="code" href="classstDFTree.html#w17">00843</a>       <span class="keyword">enum</span> <a class="code" href="classstDFTree.html#w17">tChooseMethod</a>{
00847          <a class="code" href="classstDFTree.html#w17w7">cmBIASED</a>,
00851          <a class="code" href="classstDFTree.html#w17w8">cmRANDOM</a>,
00856          <a class="code" href="classstDFTree.html#w17w9">cmMINDIST</a>,
00857 
00863          <a class="code" href="classstDFTree.html#w17w10">cmMINOCCUPANCY</a>,
00868          <a class="code" href="classstDFTree.html#w17w11">cmMINGDIST</a>
00869       };<span class="comment">//end tChooseMethod</span>
00870 
<a name="l00874"></a><a class="code" href="classstDFTree.html#w18">00874</a>       <span class="keyword">enum</span> <a class="code" href="classstDFTree.html#w18">tCorrectMethod</a> {
00878          <a class="code" href="classstDFTree.html#w18w12">crmOFF</a>,
00882          <a class="code" href="classstDFTree.html#w18w13">crmFATFACTOR</a>
00883       };<span class="comment">//end tCorrectMethod</span>
00884 
<a name="l00889"></a><a class="code" href="classstDFTree.html#w19">00889</a>       <span class="keyword">enum</span> <a class="code" href="classstDFTree.html#w19">tSplitMethod</a> {
00896          <a class="code" href="classstDFTree.html#w19w14">smRANDOM</a>,
00897 
00907          <a class="code" href="classstDFTree.html#w19w15">smMINMAX</a>,
00908 
00913          <a class="code" href="classstDFTree.html#w19w16">smSPANNINGTREE</a>
00914       };<span class="comment">//end tSplitMethod</span>
00915 
<a name="l00919"></a><a class="code" href="classstDFTree.html#w1">00919</a>       <span class="keyword">typedef</span> stResult &lt;ObjectType&gt; <a class="code" href="classstResult.html">tResult</a>;
00920 
<a name="l00924"></a><a class="code" href="classstDFTree.html#w2">00924</a>       <span class="keyword">typedef</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt; <a class="code" href="classstDFGlobalRep.html">tGR</a>;
00925 
00934       <a class="code" href="classstDFTree.html#a0">stDFTree</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman, <a class="code" href="group__types.html#a7">stCount</a> nFocus, <a class="code" href="group__types.html#a6">stDistance</a> pThreshold);
00935 
<a name="l00941"></a><a class="code" href="classstDFTree.html#a1">00941</a>       <span class="keyword">virtual</span> <a class="code" href="classstDFTree.html#a1">~stDFTree</a>(){
00942          <span class="comment">// Flus header page.</span>
00943          FlushHeader();
00944          <span class="comment">// Free it.</span>
00945          <span class="keyword">delete</span> <a class="code" href="classstDFTree.html#o0">GR</a>;
00946       }<span class="comment">//end ~stDFTree()</span>
00947 
00953       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstDFTree.html#a2">Add</a>(ObjectType * newObj);
00954 
<a name="l00958"></a><a class="code" href="classstDFTree.html#a3">00958</a>       <span class="keyword">virtual</span> <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstDFTree.html#a3">GetHeight</a>(){
00959          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o8">Height</a>;
00960       }<span class="comment">//end GetHeight</span>
00961 
<a name="l00965"></a><a class="code" href="classstDFTree.html#a4">00965</a>       <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classstDFTree.html#a4">GetNumberOfObjects</a>(){
00966          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o9">ObjectCount</a>;
00967       }<span class="comment">//end GetNumberOfObjects</span>
00968 
<a name="l00972"></a><a class="code" href="classstDFTree.html#a5">00972</a>       <span class="keyword">virtual</span> <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstDFTree.html#a5">GetMaxOccupation</a>(){
00973          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o7">MaxOccupation</a>;
00974       }<span class="comment">//end GetMaxOccupation</span>
00975 
<a name="l00979"></a><a class="code" href="classstDFTree.html#a6">00979</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a6">SetMaxOccupation</a>(<a class="code" href="group__types.html#a7">stCount</a> newValue){
00980          <span class="keywordflow">if</span> (newValue &gt; Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o7">MaxOccupation</a>){
00981             Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o7">MaxOccupation</a> = newValue;
00982          }<span class="comment">//end if</span>
00983       }<span class="comment">//end SetMaxOccupation</span>
00984 
<a name="l00988"></a><a class="code" href="classstDFTree.html#a7">00988</a>       <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classstDFTree.html#a7">GetMinOccupation</a>(){
00989          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o6">MinOccupation</a>;
00990       }<span class="comment">//end GetMinOccupation</span>
00991 
<a name="l00995"></a><a class="code" href="classstDFTree.html#a8">00995</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a8">SetMinOccupation</a>(<span class="keywordtype">double</span> min){
00996          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o6">MinOccupation</a> = min;
00997       }<span class="comment">//end SetMinOccupation</span>
00998 
<a name="l01002"></a><a class="code" href="classstDFTree.html#a9">01002</a>       <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classstDFTree.html#a9">GetNodeCount</a>(){
01003          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o10">NodeCount</a>;
01004       }<span class="comment">//end GetNodeCount</span>
01005 
01006       <span class="comment">// Tree Configuration</span>
<a name="l01013"></a><a class="code" href="classstDFTree.html#a10">01013</a> <span class="comment"></span>      <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a10">SetSplitMethod</a>(<span class="keyword">enum</span> tSplitMethod method){
01014          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o1">SplitMethod</a> = method;
01015          HeaderUpdate = <span class="keyword">true</span>;
01016       }<span class="comment">//end SetSplitMethod</span>
01017 
<a name="l01021"></a><a class="code" href="classstDFTree.html#a11">01021</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFTree.html#a11">GetSplitMethod</a>(){
01022          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o1">SplitMethod</a>;
01023       }<span class="comment">//end GetSplitMethod</span>
01024 
<a name="l01031"></a><a class="code" href="classstDFTree.html#a12">01031</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a12">SetChooseMethod</a>(<span class="keyword">enum</span> tChooseMethod method){
01032          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o2">ChooseMethod</a> = method;
01033          HeaderUpdate = <span class="keyword">true</span>;
01034       }<span class="comment">//end SetChooseMethod</span>
01035 
<a name="l01039"></a><a class="code" href="classstDFTree.html#a13">01039</a>       <span class="keywordtype">int</span> <a class="code" href="classstDFTree.html#a13">GetChooseMethod</a>(){
01040          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o2">ChooseMethod</a>;
01041       }<span class="comment">//end GetChooseMethod</span>
01042 
01043 <span class="preprocessor">      #ifdef __stDEBUG__</span>
01044 <span class="preprocessor"></span>
01050          <a class="code" href="group__types.html#a4">stPageID</a> GetRoot(){
01051             <span class="keywordflow">return</span> this-&gt;Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o4">Root</a>;
01052          }<span class="comment">//end GetRoot</span>
01053 <span class="preprocessor">      #endif //__stDEBUG__</span>
01054 <span class="preprocessor"></span>
<a name="l01062"></a><a class="code" href="classstDFTree.html#a14">01062</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstDFTree.html#a14">GetUserDataSize</a>(){
01063          <span class="keywordflow">return</span> 0;
01064       }<span class="comment">//end GetUserDataSize</span>
01065 
<a name="l01082"></a><a class="code" href="classstDFTree.html#a15">01082</a>       <span class="keywordtype">bool</span> <a class="code" href="classstDFTree.html#a15">WriteUserData</a>(<span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * userData, <a class="code" href="group__types.html#a5">stSize</a> size){
01083          <span class="keywordflow">return</span> <span class="keyword">false</span>;
01084       }<span class="comment">//end WriteUserData</span>
01085 
<a name="l01102"></a><a class="code" href="classstDFTree.html#a16">01102</a>       <span class="keywordtype">bool</span> <a class="code" href="classstDFTree.html#a16">ReadUserData</a>(<a class="code" href="group__types.html#a3">stByte</a> * userData, <a class="code" href="group__types.html#a5">stSize</a> size){
01103          <span class="keywordflow">return</span> <span class="keyword">false</span>;
01104       }<span class="comment">//end ReadUserData</span>
01105 
01116       <a class="code" href="classstDFTree.html#w1">tResult</a> * <a class="code" href="classstDFTree.html#a17">RangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range);
01117 
01134       <a class="code" href="classstDFTree.html#w1">tResult</a> * <a class="code" href="classstDFTree.html#a18">NearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01135 
01152       <a class="code" href="classstDFTree.html#w1">tResult</a> * <a class="code" href="classstDFTree.html#a19">PointQuery</a>(ObjectType * sample);
01153 
<a name="l01157"></a><a class="code" href="classstDFTree.html#w3">01157</a>       <span class="keyword">typedef</span> stGenericPriorityQueue &lt; ObjectType &gt; <a class="code" href="classstGenericPriorityQueue.html">tGenericPriorityQueue</a>;
01158 
<a name="l01162"></a><a class="code" href="classstDFTree.html#w4">01162</a>       <span class="keyword">typedef</span> stGenericEntry &lt; ObjectType &gt; <a class="code" href="classstGenericEntry.html">tGenericEntry</a>;
01163 
<a name="l01167"></a><a class="code" href="classstDFTree.html#w5">01167</a>       <span class="keyword">typedef</span> stDFGlobalRep &lt;ObjectType, EvaluatorType&gt; <a class="code" href="classstDFGlobalRep.html">tGR</a>;
01168 
<a name="l01172"></a><a class="code" href="classstDFTree.html#o0">01172</a>       <a class="code" href="classstDFGlobalRep.html">tGR</a> * <a class="code" href="classstDFTree.html#o0">GR</a>;
01173 
<a name="l01177"></a><a class="code" href="classstDFTree.html#w6">01177</a>       <span class="keyword">typedef</span> stDFMemLeafNode &lt; ObjectType &gt; <a class="code" href="classstDFMemLeafNode.html">tMemLeafNode</a>;
01178 
01184       <span class="keywordtype">double</span> <a class="code" href="classstDFTree.html#a20">GetFatFactor</a>();
01185 
01189       <span class="keyword">virtual</span> <a class="code" href="classstTreeInfoResult.html">stTreeInfoResult</a> * <a class="code" href="classstDFTree.html#a21">GetTreeInfo</a>();
01190 
01194       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a22">ForceUpdateAllFieldDistance</a>();
01195 
01196    <span class="keyword">private</span>:
01197    
01201       <span class="keyword">typedef</span> stDFLogicNode &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstDFLogicNode.html">tLogicNode</a>;
01202 
01206       <span class="keyword">typedef</span> stDFMSTSplitter &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstDFMSTSplitter.html">tMSTSplitter</a>;
01207 
01211       <span class="keyword">typedef</span> stRPriorityQueue &lt; stDistance, stCount &gt; <a class="code" href="classstRPriorityQueue.html">tPriorityQueue</a>;
01212 
01216       <span class="keyword">typedef</span> stDynamicRPriorityQueue &lt; stDistance, stQueryPriorityQueueValue &gt; <a class="code" href="classstDynamicRPriorityQueue.html">tDynamicPriorityQueue</a>;
01217 
01222       <span class="keyword">enum</span> stInsertAction{
01226          NO_ACT,
01227 
01231          CHANGE_REP,
01232 
01236          PROMOTION
01237       };<span class="comment">//end stInsertAction</span>
01238 
01243       <span class="keyword">struct </span><a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a>{
01247          ObjectType * Rep;
01248 
01252          <a class="code" href="group__types.html#a6">stDistance</a> Radius;
01253 
01257          <a class="code" href="group__types.html#a6">stDistance</a> * FieldDistance;
01258 
01262          <a class="code" href="group__types.html#a4">stPageID</a> RootID;
01263 
01267          <a class="code" href="group__types.html#a7">stCount</a> NObjects;
01268       };
01269 
01273       <span class="keywordtype">bool</span> HeaderUpdate;
01274 
01278       <a class="code" href="classstDFTree.html#w0">stDFHeader</a> * Header;
01279 
01284       <a class="code" href="classstPage.html">stPage</a> * HeaderPage;
01285 
01291       <span class="keywordtype">void</span> DefaultHeader();
01292 
01299       <span class="keywordtype">void</span> LoadHeader();
01300 
01304       <span class="keywordtype">void</span> WriteHeader(){
01305          <span class="keywordflow">if</span> (HeaderUpdate){
01306             <a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a2">WriteHeaderPage</a>(HeaderPage);
01307             HeaderUpdate = <span class="keyword">false</span>;
01308          }<span class="comment">//end if</span>
01309       }<span class="comment">//end WriteHeader</span>
01310 
01317       <span class="keywordtype">void</span> FlushHeader();
01318       
01322       <a class="code" href="classstPage.html">stPage</a> * NewPage(){
01323          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o10">NodeCount</a>++;
01324          <span class="keywordflow">return</span> this-&gt;<a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a6">GetNewPage</a>();
01325       }<span class="comment">//end NewPage</span>
01326       
01330       <span class="keywordtype">void</span> DisposePage(<a class="code" href="classstPage.html">stPage</a> * page){
01331          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o10">NodeCount</a>--;
01332          this-&gt;<a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a8">DisposePage</a>(page);
01333       }<span class="comment">//end DisposePage</span>
01334 
01343       <span class="keywordtype">int</span> ChooseSubTree(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * DFIndexNode, ObjectType * obj);
01344 
01352       <span class="keywordtype">void</span> RandomPromote(tLogicNode * node);
01353 
01360       <span class="keywordtype">void</span> MinMaxPromote(tLogicNode * node);
01361 
01372       <span class="keywordtype">void</span> ReDistribute(<a class="code" href="classstDFNode.html">stDFNode</a> * node, <span class="keywordtype">int</span> &amp; newCenter, <a class="code" href="group__types.html#a6">stDistance</a> &amp; newRadius);
01373 
01379       <span class="keywordtype">bool</span> IsRoot(<a class="code" href="group__types.html#a4">stPageID</a> nodeID){
01380          <span class="keywordflow">return</span> nodeID == this-&gt;Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o4">Root</a>;
01381       }<span class="comment">//end IsRoot</span>
01382 
01383 <span class="preprocessor">      #ifndef __stDEBUG__</span>
01384 <span class="preprocessor"></span>
01387          <a class="code" href="group__types.html#a4">stPageID</a> GetRoot(){
01388             <span class="keywordflow">return</span> this-&gt;Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o4">Root</a>;
01389          }<span class="comment">//end GetRoot</span>
01390 <span class="preprocessor">      #endif // __stDEBUG__</span>
01391 <span class="preprocessor"></span>
01395       <span class="keywordtype">void</span> SetRoot(<a class="code" href="group__types.html#a4">stPageID</a> root){
01396          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o4">Root</a> = root;
01397          HeaderUpdate = <span class="keyword">true</span>;
01398       }<span class="comment">//end SetRoot</span>
01399 
01403       <span class="keywordtype">void</span> UpdateObjectCounter(<span class="keywordtype">int</span> inc){
01404          Header-&gt;<a class="code" href="structstDFTree_1_1tDFHeader.html#o9">ObjectCount</a> += inc;
01405          HeaderUpdate = <span class="keyword">true</span>;
01406       }<span class="comment">//end UpdateObjectCounter</span>
01407 
01439       <span class="keywordtype">int</span> InsertRecursive(<a class="code" href="group__types.html#a4">stPageID</a> currNodeID, ObjectType * newObj,
01440             ObjectType * repObj,
01441             <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2,
01442             tGR * GR);
01443 
01458       <span class="keywordtype">void</span> AddNewRoot(ObjectType * obj1, <a class="code" href="group__types.html#a6">stDistance</a> radius1, <a class="code" href="group__types.html#a4">stPageID</a> nodeID1,
01459                <a class="code" href="group__types.html#a7">stCount</a> nEntries1, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance1,
01460                ObjectType * obj2, <a class="code" href="group__types.html#a6">stDistance</a> radius2, <a class="code" href="group__types.html#a4">stPageID</a> nodeID2,
01461                <a class="code" href="group__types.html#a7">stCount</a> nEntries2, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance2);
01462 
01481       <span class="keywordtype">void</span> SplitLeaf(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * oldNode, <a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * newNode,
01482             ObjectType * newObj, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance, ObjectType * prevRep,
01483             <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2);
01484 
01515       <span class="keywordtype">void</span> SplitIndex(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * oldNode, <a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * newNode,
01516             ObjectType * newObj1, <a class="code" href="group__types.html#a6">stDistance</a> newRadius1,
01517             <a class="code" href="group__types.html#a4">stPageID</a> newNodeID1, <a class="code" href="group__types.html#a7">stCount</a> newNEntries1, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance1,
01518             ObjectType * newObj2, <a class="code" href="group__types.html#a6">stDistance</a> newRadius2,
01519             <a class="code" href="group__types.html#a4">stPageID</a> newNodeID2, <a class="code" href="group__types.html#a7">stCount</a> newNEntries2, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance2,
01520             ObjectType * prevRep,
01521             <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2);
01522 
01535       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a17">RangeQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
01536                       ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01537                       <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres, <a class="code" href="group__types.html#a6">stDistance</a> * DistQueryFocus);
01538 
01549       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a18">NearestQuery</a>(tResult * result, ObjectType * sample,
01550                         <a class="code" href="group__types.html#a6">stDistance</a> rangeK, <a class="code" href="group__types.html#a7">stCount</a> k);
01551 
01568       <span class="keywordtype">void</span> <a class="code" href="classstDFTree.html#a19">PointQuery</a>(tResult * result, ObjectType * sample);
01569 
01573       <span class="keywordtype">void</span> UpdateDistances(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node, ObjectType * repObj,
01574                            <span class="keywordtype">int</span> repObjIdx);
01575 
01583       <span class="keywordtype">void</span> GetTreeInfoRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, <span class="keywordtype">int</span> level,
01584                                 <a class="code" href="classstTreeInformation.html">stTreeInformation</a> * info);
01585 
01595       <span class="keywordtype">void</span> ObjectIntersectionsRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, ObjectType * obj,
01596                                         <span class="keywordtype">int</span> level, <a class="code" href="classstTreeInformation.html">stTreeInformation</a> * info);
01597 
01598 };<span class="comment">//end stDFTree</span>
01599 
01600 <span class="comment">//=============================================================================</span>
01601 <span class="comment">// Class template stDFGlobalRep</span>
01602 <span class="comment">//-----------------------------------------------------------------------------</span>
01611 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l01612"></a><a class="code" href="classstDFGlobalRep.html">01612</a> <span class="keyword">class </span><a class="code" href="classstDFGlobalRep.html">stDFGlobalRep</a> {
01613 
01614    <span class="keyword">public</span>:
01615 
<a name="l01619"></a><a class="code" href="classstDFGlobalRep.html#w0">01619</a>       <span class="keyword">typedef</span> stDFLogicNode &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstDFLogicNode.html">tLogicNode</a>;
01620 
<a name="l01624"></a><a class="code" href="classstDFGlobalRep.html#w1">01624</a>       <span class="keyword">typedef</span> stDFMSTSplitter &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstDFMSTSplitter.html">tMSTSplitter</a>;
01625 
<a name="l01629"></a><a class="code" href="classstDFGlobalRep.html#o0">01629</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstDFGlobalRep.html#o0">NumFocus</a>;
01630 
<a name="l01634"></a><a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html">01634</a>       <span class="keyword">struct </span><a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html">stDFGlobalRepEntry</a>{
<a name="l01635"></a><a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html#o0">01635</a>          ObjectType * <a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html#o0">Object</a>;
<a name="l01636"></a><a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html#o1">01636</a>          <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="structstDFGlobalRep_1_1stDFGlobalRepEntry.html#o1">MaxDistance</a>;
01637       };<span class="comment">//end stDFGlobalRepEntry</span>
01638 
01650       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a0">FindGlobalRep</a>(<a class="code" href="classstDFLogicNode.html">tLogicNode</a> * logicNode, <a class="code" href="classstDFMSTSplitter.html">tMSTSplitter</a> * MSTSplitter,
01651                          <a class="code" href="group__types.html#a7">stCount</a> center1, <a class="code" href="group__types.html#a7">stCount</a> center2, <a class="code" href="group__types.html#a7">stCount</a> numObject);
01652 
01659       <a class="code" href="classstDFGlobalRep.html#a1">stDFGlobalRep</a>(<a class="code" href="group__types.html#a7">stCount</a> nFocus, <a class="code" href="group__types.html#a6">stDistance</a> pThreshold,
01660                     EvaluatorType * metricEvaluator);
01661 
01662       <span class="comment">/*</span>
01663 <span class="comment">      * This method verify if the first Split not ocurred already</span>
01664 <span class="comment">      * @return The boolean value that define if the first Split not ocurred already</span>
01665 <span class="comment">      */</span>
<a name="l01666"></a><a class="code" href="classstDFGlobalRep.html#a2">01666</a>       <span class="keywordtype">bool</span> <a class="code" href="classstDFGlobalRep.html#a2">FirstSplit</a>(){
01667          <span class="keywordflow">return</span> bFirstSplit;
01668       };<span class="comment">//end FirstSplit</span>
01669 
01670       <span class="comment">/*</span>
01671 <span class="comment">      * This method sets that the first Split already ocurred</span>
01672 <span class="comment">      */</span>
<a name="l01673"></a><a class="code" href="classstDFGlobalRep.html#a3">01673</a>       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a3">SetFirstSplit</a>(){
01674          bFirstSplit = FALSE;
01675       };<span class="comment">//end SetFirstSplit</span>
01676 
01684       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a4">SetFieldDistance</a>(<a class="code" href="classstDFLeafNode.html">stDFLeafNode</a> * node, <a class="code" href="group__types.html#a7">stCount</a> idx,
01685                             ObjectType * object);
01686 
01694       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a4">SetFieldDistance</a>(<a class="code" href="classstDFIndexNode.html">stDFIndexNode</a> * node, <a class="code" href="group__types.html#a7">stCount</a> idx,
01695                             ObjectType * object);
01696 
01703       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a6">BuildFieldDistance</a>(ObjectType * object, <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance);
01704 
01713       <span class="keywordtype">bool</span> <a class="code" href="classstDFGlobalRep.html#a7">PruneByGlobalRep</a>(<a class="code" href="group__types.html#a6">stDistance</a> * objGRCoord, <a class="code" href="group__types.html#a6">stDistance</a> radius,
01714                             <a class="code" href="group__types.html#a6">stDistance</a> * distQueryFocus, <a class="code" href="group__types.html#a6">stDistance</a> queryRadius);
01715 
01724       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a8">CheckUpdate</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman, <a class="code" href="group__types.html#a4">stPageID</a> rootPageID,
01725                        <a class="code" href="group__types.html#a6">stDistance</a> * fieldDistance);
01726 
01735       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a9">GetCandidates</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman, <a class="code" href="group__types.html#a4">stPageID</a> pageID,
01736                          vector &lt;ObjectType *&gt; &amp; candidateSet);
01737 
01743       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a10">UpdateGR</a>(vector &lt;ObjectType *&gt; candidateSet);
01744 
01750       <span class="keywordtype">void</span> <a class="code" href="classstDFGlobalRep.html#a11">UpdateFieldDistance</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman, <a class="code" href="group__types.html#a4">stPageID</a> pageID);
01751 
01752    <span class="keyword">private</span>:
01753 
01757       stDFGlobalRepEntry GlobalRep[<a class="code" href="stDFNode_8h.html#a0">STFOCUS</a>];
01758 
01762       <a class="code" href="group__types.html#a6">stDistance</a> Uncircumbscribed;
01763 
01767       <a class="code" href="group__types.html#a6">stDistance</a> Threshold;
01768 
01772       <span class="keywordtype">bool</span> bFirstSplit;
01773 
01777       EvaluatorType * myMetricEvaluator;
01778 
01782       <span class="keyword">typedef</span> stGenericMatrix &lt;stDistance&gt; tDistanceMatrix;
01783 
01784 };<span class="comment">//end stDFGlobalRep</span>
01785 
01786 <span class="comment">// Include implementation</span>
01787 <span class="preprocessor">#include "stDFTree.cc"</span>
01788 
01789 <span class="preprocessor">#endif //__STDFTREE_H</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon Mar 21 16:12:06 2005 for GBDI Arboretum by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.3.4</small><br>
Copyright &copy 2002-2003 GBDI-ICMC-USP
</address>
</body>
</html>
