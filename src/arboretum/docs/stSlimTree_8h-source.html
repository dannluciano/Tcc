<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stSlimTree.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<h1>GBDI Arboretum<br><small>Version Release 1</small></h1>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>stSlimTree.h</h1><a href="stSlimTree_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/**********************************************************************</span>
00002 <span class="comment">* GBDI Arboretum - Copyright (c) 2002-2004 GBDI-ICMC-USP</span>
00003 <span class="comment">*</span>
00004 <span class="comment">*                           Homepage: http://gbdi.icmc.usp.br/arboretum</span>
00005 <span class="comment">**********************************************************************/</span>
00006 <span class="comment">/* ====================================================================</span>
00007 <span class="comment"> * The GBDI-ICMC-USP Software License Version 1.0</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Copyright (c) 2004 Grupo de Bases de Dados e Imagens, Instituto de</span>
00010 <span class="comment"> * Ciências Matemáticas e de Computação, University of São Paulo -</span>
00011 <span class="comment"> * Brazil (the Databases and Image Group - Intitute of Matematical and </span>
00012 <span class="comment"> * Computer Sciences).  All rights reserved.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00015 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00016 <span class="comment"> * are met:</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00019 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00022 <span class="comment"> *    notice, this list of conditions and the following disclaimer in</span>
00023 <span class="comment"> *    the documentation and/or other materials provided with the</span>
00024 <span class="comment"> *    distribution.</span>
00025 <span class="comment"> *</span>
00026 <span class="comment"> * 3. The end-user documentation included with the redistribution,</span>
00027 <span class="comment"> *    if any, must include the following acknowledgment:</span>
00028 <span class="comment"> *       "This product includes software developed by Grupo de Bases</span>
00029 <span class="comment"> *        de Dados e Imagens, Instituto de Ciências Matemáticas e de</span>
00030 <span class="comment"> *        Computação, University of São Paulo - Brazil (the Databases </span>
00031 <span class="comment"> *        and Image Group - Intitute of Matematical and Computer </span>
00032 <span class="comment"> *        Sciences)"</span>
00033 <span class="comment"> *</span>
00034 <span class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</span>
00035 <span class="comment"> *    if and wherever such third-party acknowledgments normally appear.</span>
00036 <span class="comment"> *</span>
00037 <span class="comment"> * 4. The names of the research group, institute, university, authors</span>
00038 <span class="comment"> *    and collaborators must not be used to endorse or promote products</span>
00039 <span class="comment"> *    derived from this software without prior written permission.</span>
00040 <span class="comment"> *</span>
00041 <span class="comment"> * 5. The names of products derived from this software may not contain</span>
00042 <span class="comment"> *    the name of research group, institute or university, without prior</span>
00043 <span class="comment"> *    written permission of the authors of this software.</span>
00044 <span class="comment"> *</span>
00045 <span class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</span>
00046 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
00047 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
00048 <span class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OF THIS SOFTWARE OR</span>
00049 <span class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
00050 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
00051 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
00052 <span class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
00053 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
00054 <span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
00055 <span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
00056 <span class="comment"> * SUCH DAMAGE.</span>
00057 <span class="comment"> *</span>
00058 <span class="comment"> * ====================================================================</span>
00059 <span class="comment"> *                                            http://gbdi.icmc.usp.br/</span>
00060 <span class="comment"> */</span>
00074 <span class="comment">// Copyright (c) 2003 GBDI-ICMC-USP</span>
00075 
00076 <span class="preprocessor">#ifndef __STSLIMTREE_H</span>
00077 <span class="preprocessor"></span><span class="preprocessor">#define __STSLIMTREE_H</span>
00078 <span class="preprocessor"></span>
00079 <span class="preprocessor">#include &lt;<a class="code" href="stUtil_8h.html">arboretum/stUtil.h</a>&gt;</span>
00080 <span class="preprocessor">#include &lt;<a class="code" href="stTypes_8h.html">arboretum/stTypes.h</a>&gt;</span>
00081 <span class="preprocessor">#include &lt;<a class="code" href="stMetricTree_8h.html">arboretum/stMetricTree.h</a>&gt;</span>
00082 <span class="preprocessor">#include &lt;<a class="code" href="stSlimNode_8h.html">arboretum/stSlimNode.h</a>&gt;</span>
00083 <span class="preprocessor">#include &lt;<a class="code" href="stPageManager_8h.html">arboretum/stPageManager.h</a>&gt;</span>
00084 <span class="preprocessor">#include &lt;<a class="code" href="stGenericPriorityQueue_8h.html">arboretum/stGenericPriorityQueue.h</a>&gt;</span>
00085 
00086 <span class="comment">// this is used to set the initial size of the dynamic queue</span>
<a name="l00087"></a><a class="code" href="stSlimTree_8h.html#a0">00087</a> <span class="preprocessor">#define STARTVALUEQUEUE 200</span>
00088 <span class="preprocessor"></span><span class="comment">// this is used to set the increment size of the dynamic queue</span>
<a name="l00089"></a><a class="code" href="stSlimTree_8h.html#a1">00089</a> <span class="preprocessor">#define INCREMENTVALUEQUEUE 200</span>
00090 <span class="preprocessor"></span>
00091 <span class="preprocessor">#include &lt;string.h&gt;</span>
00092 <span class="preprocessor">#include &lt;math.h&gt;</span>
00093 <span class="preprocessor">#include &lt;values.h&gt;</span>
00094 <span class="preprocessor">#include &lt;algorithm&gt;</span>
00095 <span class="preprocessor">#include &lt;<a class="code" href="stMAMView_8h.html">arboretum/stMAMView.h</a>&gt;</span> <span class="comment">// Visualization support</span>
00096 
00097 <span class="comment">//=============================================================================</span>
00098 <span class="comment">// Class template stSlimLogicNode</span>
00099 <span class="comment">//-----------------------------------------------------------------------------</span>
00119 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00120"></a><a class="code" href="classstSlimLogicNode.html">00120</a> <span class="keyword">class </span><a class="code" href="classstSlimLogicNode.html">stSlimLogicNode</a>{
00121    <span class="keyword">public</span>:
00127       <a class="code" href="classstSlimLogicNode.html#a0">stSlimLogicNode</a>(<a class="code" href="group__types.html#a7">stCount</a> maxOccupation);
00128 
00134       <a class="code" href="classstSlimLogicNode.html#a1">~stSlimLogicNode</a>();
00135 
<a name="l00145"></a><a class="code" href="classstSlimLogicNode.html#a2">00145</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimLogicNode.html#a2">AddEntry</a>(ObjectType * obj){
00146          Entries[Count].Object = obj;
00147          Entries[Count].Mine = <span class="keyword">true</span>;
00148          Count++;
00149          <span class="keywordflow">return</span> Count - 1;
00150       }<span class="comment">//end AddEntry</span>
00151 
00161       <span class="keywordtype">int</span> <a class="code" href="classstSlimLogicNode.html#a2">AddEntry</a>(<a class="code" href="group__types.html#a5">stSize</a> size, <span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * object);
00162 
<a name="l00166"></a><a class="code" href="classstSlimLogicNode.html#a4">00166</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a4">GetNumberOfEntries</a>(){
00167          <span class="keywordflow">return</span> Count;
00168       }<span class="comment">//end GetNumberOfEntries</span>
00169 
<a name="l00175"></a><a class="code" href="classstSlimLogicNode.html#a5">00175</a>       ObjectType * <a class="code" href="classstSlimLogicNode.html#a5">GetObject</a>(<span class="keywordtype">int</span> idx){
00176          <span class="keywordflow">return</span> Entries[idx].Object;
00177       }<span class="comment">//end GetObject</span>
00178 
<a name="l00184"></a><a class="code" href="classstSlimLogicNode.html#a6">00184</a>       ObjectType * <a class="code" href="classstSlimLogicNode.html#a6">operator []</a>(<span class="keywordtype">int</span> idx){
00185          <span class="keywordflow">return</span> Entries[idx].Object;
00186       }<span class="comment">//end operator []</span>
00187 
<a name="l00193"></a><a class="code" href="classstSlimLogicNode.html#a7">00193</a>       <a class="code" href="group__types.html#a4">stPageID</a> <a class="code" href="classstSlimLogicNode.html#a7">GetPageID</a>(<span class="keywordtype">int</span> idx){
00194          <span class="keywordflow">return</span> Entries[idx].PageID;
00195       }<span class="comment">//end GetPageID</span>
00196 
<a name="l00202"></a><a class="code" href="classstSlimLogicNode.html#a8">00202</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstSlimLogicNode.html#a8">GetNEntries</a>(<span class="keywordtype">int</span> idx){
00203          <span class="keywordflow">return</span> Entries[idx].NEntries;
00204       }<span class="comment">//end GetNEntries</span>
00205 
<a name="l00211"></a><a class="code" href="classstSlimLogicNode.html#a9">00211</a>       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstSlimLogicNode.html#a9">GetRadius</a>(<span class="keywordtype">int</span> idx){
00212          <span class="keywordflow">return</span> Entries[idx].Radius;
00213       }<span class="comment">//end GetRadius</span>
00214 
<a name="l00223"></a><a class="code" href="classstSlimLogicNode.html#a10">00223</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a10">SetEntry</a>(<span class="keywordtype">int</span> idx, <a class="code" href="group__types.html#a4">stPageID</a> pageID, <a class="code" href="group__types.html#a5">stSize</a> nEntries, <a class="code" href="group__types.html#a6">stDistance</a> radius){
00224          Entries[idx].PageID = pageID;
00225          Entries[idx].NEntries = nEntries;
00226          Entries[idx].Radius = radius;
00227       }<span class="comment">//end GetPageID</span>
00228 
00235       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a11">AddIndexNode</a>(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node);
00236 
00243       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a12">AddLeafNode</a>(<a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node);
00244 
<a name="l00250"></a><a class="code" href="classstSlimLogicNode.html#a13">00250</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a13">GetRepresentativeIndex</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00251          <span class="keywordflow">return</span> RepIndex[idx];
00252       }<span class="comment">//end GetRepresentativeIndex</span>
00253 
<a name="l00259"></a><a class="code" href="classstSlimLogicNode.html#a14">00259</a>       ObjectType * <a class="code" href="classstSlimLogicNode.html#a14">GetRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00260         <span class="keywordflow">return</span> Entries[RepIndex[idx]].Object;
00261       }<span class="comment">//end GetRepresentative</span>
00262 
<a name="l00270"></a><a class="code" href="classstSlimLogicNode.html#a15">00270</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a15">SetRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> rep0, <a class="code" href="group__types.html#a7">stCount</a> rep1){
00271          RepIndex[0] = rep0;
00272          RepIndex[1] = rep1;
00273       }<span class="comment">//end SetRepresentative</span>
00274 
<a name="l00287"></a><a class="code" href="classstSlimLogicNode.html#a16">00287</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a16">Distribute</a>(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node0, ObjectType * &amp; rep0,
00288                          <a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node1, ObjectType * &amp; rep1,
00289                          EvaluatorType * metricEvaluator){
00290          <a class="code" href="group__types.html#a7">stCount</a> result;
00291 
00292          <span class="comment">// Distribute...</span>
00293          result = <a class="code" href="classstSlimLogicNode.html#a18">TestDistribution</a>(node0, node1, metricEvaluator);
00294 
00295          <span class="comment">// Representatives</span>
00296          rep0 = <a class="code" href="classstSlimLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstSlimLogicNode.html#a13">GetRepresentativeIndex</a>(0));
00297          rep1 = <a class="code" href="classstSlimLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstSlimLogicNode.html#a13">GetRepresentativeIndex</a>(1));
00298 
00299          <span class="keywordflow">return</span> result;
00300       }<span class="comment">//end Distribute</span>
00301 
<a name="l00314"></a><a class="code" href="classstSlimLogicNode.html#a17">00314</a>       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a16">Distribute</a>(<a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node0, ObjectType * &amp; rep0,
00315                          <a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node1, ObjectType * &amp; rep1,
00316                          EvaluatorType * metricEvaluator){
00317          <a class="code" href="group__types.html#a7">stCount</a> result;
00318 
00319          <span class="comment">// Distribute...</span>
00320          result = <a class="code" href="classstSlimLogicNode.html#a18">TestDistribution</a>(node0, node1, metricEvaluator);
00321 
00322          <span class="comment">// Representatives</span>
00323          rep0 = <a class="code" href="classstSlimLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstSlimLogicNode.html#a13">GetRepresentativeIndex</a>(0));
00324          rep1 = <a class="code" href="classstSlimLogicNode.html#a24">BuyObject</a>(<a class="code" href="classstSlimLogicNode.html#a13">GetRepresentativeIndex</a>(1));
00325 
00326          <span class="keywordflow">return</span> result;
00327       }<span class="comment">//end Distribute</span>
00328 
00341       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a18">TestDistribution</a>(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node0, <a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node1,
00342                                EvaluatorType * metricEvaluator);
00343 
00354       <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimLogicNode.html#a18">TestDistribution</a>(<a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node0, <a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node1,
00355                                EvaluatorType * metricEvaluator);
00356 
<a name="l00361"></a><a class="code" href="classstSlimLogicNode.html#a20">00361</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a20">SetMinOccupation</a>(<a class="code" href="group__types.html#a7">stCount</a> min){
00362          MinOccupation = min;
00363          <span class="comment">// At least the nodes must store 2 objects.</span>
00364          <span class="keywordflow">if</span> ((MinOccupation &gt; (MaxEntries/2)) || (MinOccupation == 0)){
00365             MinOccupation = 2;
00366          }<span class="comment">//end if</span>
00367       }<span class="comment">//end SetMinOccupation</span>
00368 
<a name="l00373"></a><a class="code" href="classstSlimLogicNode.html#a21">00373</a>       <a class="code" href="group__types.html#a8">stNodeType</a> <a class="code" href="classstSlimLogicNode.html#a21">GetNodeType</a>(){
00374          <span class="keywordflow">return</span> NodeType;
00375       }<span class="comment">//end GetNodeType</span>
00376 
<a name="l00380"></a><a class="code" href="classstSlimLogicNode.html#a22">00380</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimLogicNode.html#a22">SetNodeType</a>(<a class="code" href="group__types.html#a8">stNodeType</a> type){
00381          NodeType = type;
00382       }<span class="comment">//end SetNodeType</span>
00383 
<a name="l00390"></a><a class="code" href="classstSlimLogicNode.html#a23">00390</a>       <span class="keywordtype">bool</span> <a class="code" href="classstSlimLogicNode.html#a23">IsRepresentative</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00391          <span class="keywordflow">return</span> ((idx == RepIndex[0]) || (idx == RepIndex[1]));
00392       }<span class="comment">//end IsRepresentative</span>
00393 
<a name="l00405"></a><a class="code" href="classstSlimLogicNode.html#a24">00405</a>       ObjectType * <a class="code" href="classstSlimLogicNode.html#a24">BuyObject</a>(<a class="code" href="group__types.html#a7">stCount</a> idx){
00406          Entries[idx].Mine = <span class="keyword">false</span>;
00407          <span class="keywordflow">return</span> Entries[idx].Object;
00408       }<span class="comment">//end BuyObject</span>
00409 
00410    <span class="keyword">private</span>:
00414       <span class="keyword">struct </span>stSlimLogicEntry{
00418          ObjectType * Object;
00419 
00423          <a class="code" href="group__types.html#a4">stPageID</a> PageID;
00424 
00428          <a class="code" href="group__types.html#a7">stCount</a> NEntries;
00429 
00433          <a class="code" href="group__types.html#a6">stDistance</a> Radius;
00434 
00438          <span class="keywordtype">bool</span> Mine;
00439 
00443          <a class="code" href="group__types.html#a6">stDistance</a> Distance[2];
00444 
00448          <span class="keywordtype">bool</span> Mapped;
00449       };
00450 
00454       <a class="code" href="group__types.html#a7">stCount</a> MinOccupation;
00455 
00459       <span class="keyword">struct </span><a class="code" href="classstSlimLogicEntry.html">stSlimLogicEntry</a> * Entries;
00460 
00464       <a class="code" href="group__types.html#a7">stCount</a> MaxEntries;
00465 
00469       <a class="code" href="group__types.html#a7">stCount</a> Count;
00470 
00474       <a class="code" href="group__types.html#a7">stCount</a> RepIndex[2];
00475 
00479       <a class="code" href="group__types.html#a8">stNodeType</a> NodeType;
00480 
00487       <a class="code" href="group__types.html#a7">stCount</a> UpdateDistances(EvaluatorType * metricEvaluator);
00488       
00489 };<span class="comment">//end stSlimLogicNode</span>
00490 
00491 <span class="comment">//=============================================================================</span>
00492 <span class="comment">// Class template stSlimMSTSpliter</span>
00493 <span class="comment">//-----------------------------------------------------------------------------</span>
00503 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00504"></a><a class="code" href="classstSlimMSTSplitter.html">00504</a> <span class="keyword">class </span><a class="code" href="classstSlimMSTSplitter.html">stSlimMSTSplitter</a>{
00505    <span class="keyword">public</span>:
<a name="l00509"></a><a class="code" href="classstSlimMSTSplitter.html#w0">00509</a>       <span class="keyword">typedef</span> stSlimLogicNode &lt; ObjectType, EvaluatorType &gt; <a class="code" href="classstSlimLogicNode.html">tLogicNode</a>;
00510 
00515       <a class="code" href="classstSlimMSTSplitter.html#a0">stSlimMSTSplitter</a>(<a class="code" href="classstSlimLogicNode.html">tLogicNode</a> * node);
00516 
00520       <a class="code" href="classstSlimMSTSplitter.html#a1">~stSlimMSTSplitter</a>();
00521 
<a name="l00525"></a><a class="code" href="classstSlimMSTSplitter.html#a2">00525</a>       <span class="keyword">const</span> <a class="code" href="classstSlimLogicNode.html">tLogicNode</a> * <a class="code" href="classstSlimMSTSplitter.html#a2">GetLogicNode</a>(){
00526          <span class="keywordflow">return</span> <a class="code" href="classstSlimMSTSplitter.html#p0">Node</a>;
00527       }<span class="comment">//end GetLogicNode</span>
00528 
00533       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#a3">Distribute</a>(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node0, ObjectType * &amp; rep0,
00534                      <a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node1, ObjectType * &amp; rep1,
00535                      EvaluatorType * metricEvaluator);
00536 
00540       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#a3">Distribute</a>(<a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node0, ObjectType * &amp; rep0,
00541                      <a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * node1, ObjectType * &amp; rep1,
00542                      EvaluatorType * metricEvaluator);
00543                      
00544    <span class="keyword">protected</span>:
<a name="l00548"></a><a class="code" href="classstSlimMSTSplitter.html#x0">00548</a>       <span class="keyword">typedef</span> stGenericMatrix &lt;stDistance&gt; <a class="code" href="classstGenericMatrix.html">tDistanceMatrix</a>;
00549 
<a name="l00553"></a><a class="code" href="classstSlimMSTSplitter.html#x4">00553</a>       <span class="keyword">enum</span> <a class="code" href="classstSlimMSTSplitter.html#x4">tClusterState</a>{
00554          <a class="code" href="classstSlimMSTSplitter.html#x4x1">ALIVE</a>,
00555          <a class="code" href="classstSlimMSTSplitter.html#x4x2">DEAD</a>,
00556          <a class="code" href="classstSlimMSTSplitter.html#x4x3">DEATH_SENTENCE</a>
00557       };<span class="comment">//end tClusterState</span>
00558 
<a name="l00562"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html">00562</a>       <span class="keyword">struct </span><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html">tCluster</a>{
<a name="l00566"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o0">00566</a>          <span class="keyword">enum</span> tClusterState <a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o0">State</a>;
00567 
<a name="l00571"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o1">00571</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o1">Size</a>;
00572 
<a name="l00576"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o2">00576</a>          <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o2">MinDist</a>;
00577 
<a name="l00581"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o3">00581</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o3">Src</a>;
00582 
<a name="l00586"></a><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o4">00586</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimMSTSplitter_1_1tCluster.html#o4">Dst</a>;
00587       };
00588 
<a name="l00592"></a><a class="code" href="classstSlimMSTSplitter.html#p0">00592</a>       <a class="code" href="classstSlimLogicNode.html">tLogicNode</a> * <a class="code" href="classstSlimMSTSplitter.html#p0">Node</a>;
00593 
<a name="l00597"></a><a class="code" href="classstSlimMSTSplitter.html#p1">00597</a>       <a class="code" href="classstGenericMatrix.html">tDistanceMatrix</a> <a class="code" href="classstSlimMSTSplitter.html#p1">DMat</a>;
00598 
<a name="l00602"></a><a class="code" href="classstSlimMSTSplitter.html#p2">00602</a>       <span class="keyword">struct </span><a class="code" href="structstSlimMSTSplitter_1_1tCluster.html">tCluster</a> * <a class="code" href="classstSlimMSTSplitter.html#p2">Cluster</a>;
00603 
<a name="l00607"></a><a class="code" href="classstSlimMSTSplitter.html#p3">00607</a>       <span class="keywordtype">int</span> * <a class="code" href="classstSlimMSTSplitter.html#p3">ObjectCluster</a>;
00608 
<a name="l00612"></a><a class="code" href="classstSlimMSTSplitter.html#p4">00612</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#p4">N</a>;
00613 
<a name="l00617"></a><a class="code" href="classstSlimMSTSplitter.html#p5">00617</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#p5">Cluster0</a>;
00618 
<a name="l00622"></a><a class="code" href="classstSlimMSTSplitter.html#p6">00622</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#p6">Cluster1</a>;
00623 
00630       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#b0">FindCenter</a>(<span class="keywordtype">int</span> clus);
00631 
00638       <span class="keywordtype">int</span> <a class="code" href="classstSlimMSTSplitter.html#b1">BuildDistanceMatrix</a>(EvaluatorType * metricEvaluator);
00639 
00647       <span class="keywordtype">void</span> <a class="code" href="classstSlimMSTSplitter.html#b2">PerformMST</a>();
00648 
00657       <span class="keywordtype">void</span> <a class="code" href="classstSlimMSTSplitter.html#b3">JoinClusters</a>(<span class="keywordtype">int</span> cluster1, <span class="keywordtype">int</span> cluster2);
00658 
00659 };<span class="comment">//end stSlimMSTSplitter</span>
00660 
00661 <span class="comment">//=============================================================================</span>
00662 <span class="comment">// Class template stSlimTree</span>
00663 <span class="comment">//-----------------------------------------------------------------------------</span>
00681 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00682"></a><a class="code" href="classstSlimTree.html">00682</a> <span class="keyword">class </span><a class="code" href="classstSlimTree.html">stSlimTree</a>: <span class="keyword">public</span> <a class="code" href="classstMetricTree.html">stMetricTree</a> &lt;ObjectType, EvaluatorType&gt; {
00683    <span class="keyword">public</span>:
00684 
<a name="l00689"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html">00689</a>       <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structstSlimTree_1_1tSlimHeader.html">tSlimHeader</a>{
<a name="l00695"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o0">00695</a>          <span class="keywordtype">char</span> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o0">Magic</a>[4];
00696       
<a name="l00700"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o1">00700</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o1">SplitMethod</a>;
00701       
<a name="l00705"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o2">00705</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o2">ChooseMethod</a>;
00706       
<a name="l00710"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o3">00710</a>          <span class="keywordtype">int</span> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o3">CorrectMethod</a>;
00711       
<a name="l00715"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">00715</a>          <a class="code" href="group__types.html#a4">stPageID</a> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">Root</a>;
00716       
<a name="l00720"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o5">00720</a>          <span class="keywordtype">double</span> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o5">MinOccupation</a>;
00721 
<a name="l00725"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o6">00725</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o6">MaxOccupation</a>;
00726 
<a name="l00730"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o7">00730</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o7">Height</a>;
00731 
<a name="l00735"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o8">00735</a>          <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o8">ObjectCount</a>;
00736          
<a name="l00740"></a><a class="code" href="structstSlimTree_1_1tSlimHeader.html#o9">00740</a>          <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="structstSlimTree_1_1tSlimHeader.html#o9">NodeCount</a>;
00741       }<a class="code" href="structstSlimTree_1_1tSlimHeader.html">stSlimHeader</a>;   
00742 
<a name="l00746"></a><a class="code" href="classstSlimTree.html#w16">00746</a>       <span class="keyword">enum</span> <a class="code" href="classstSlimTree.html#w16">tChooseMethod</a>{
00750          <a class="code" href="classstSlimTree.html#w16w6">cmBIASED</a>,
00754          <a class="code" href="classstSlimTree.html#w16w7">cmRANDOM</a>,
00759          <a class="code" href="classstSlimTree.html#w16w8">cmMINDIST</a>,
00760 
00766          <a class="code" href="classstSlimTree.html#w16w9">cmMINOCCUPANCY</a>,
00771          <a class="code" href="classstSlimTree.html#w16w10">cmMINGDIST</a>
00772       };<span class="comment">//end tChooseMethod</span>
00773 
<a name="l00777"></a><a class="code" href="classstSlimTree.html#w17">00777</a>       <span class="keyword">enum</span> <a class="code" href="classstSlimTree.html#w17">tCorrectMethod</a> {
00781          <a class="code" href="classstSlimTree.html#w17w11">crmOFF</a>,
00785          <a class="code" href="classstSlimTree.html#w17w12">crmFATFACTOR</a>
00786       };<span class="comment">//end tCorrectMethod</span>
00787 
<a name="l00792"></a><a class="code" href="classstSlimTree.html#w18">00792</a>       <span class="keyword">enum</span> <a class="code" href="classstSlimTree.html#w18">tSplitMethod</a> {
00799          <a class="code" href="classstSlimTree.html#w18w13">smRANDOM</a>,
00800 
00810          <a class="code" href="classstSlimTree.html#w18w14">smMINMAX</a>,
00811 
00816          <a class="code" href="classstSlimTree.html#w18w15">smSPANNINGTREE</a>
00817       };<span class="comment">//end tSplitMethod</span>
00818 
<a name="l00822"></a><a class="code" href="classstSlimTree.html#w1">00822</a>       <span class="keyword">typedef</span> stResult &lt;ObjectType&gt; <a class="code" href="classstResult.html">tResult</a>;
00823 
<a name="l00827"></a><a class="code" href="classstSlimTree.html#w2">00827</a>       <span class="keyword">typedef</span> stGenericPriorityQueue &lt; ObjectType &gt; <a class="code" href="classstGenericPriorityQueue.html">tGenericPriorityQueue</a>;
00828 
<a name="l00832"></a><a class="code" href="classstSlimTree.html#w3">00832</a>       <span class="keyword">typedef</span> stGenericEntry &lt; ObjectType &gt; <a class="code" href="classstGenericEntry.html">tGenericEntry</a>;
00833 
<a name="l00837"></a><a class="code" href="classstSlimTree.html#w4">00837</a>       <span class="keyword">typedef</span> stGenericPriorityHeap &lt; ObjectType &gt; <a class="code" href="classstGenericPriorityHeap.html">tPGenericHeap</a>;
00838 
<a name="l00842"></a><a class="code" href="classstSlimTree.html#w5">00842</a>       <span class="keyword">typedef</span> stSlimMemLeafNode &lt; ObjectType &gt; <a class="code" href="classstSlimMemLeafNode.html">tMemLeafNode</a>;
00843 
00851       <a class="code" href="classstSlimTree.html#a0">stSlimTree</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman);
00852 
00862       <a class="code" href="classstSlimTree.html#a0">stSlimTree</a>(<a class="code" href="classstPageManager.html">stPageManager</a> * pageman, EvaluatorType * metricEval);
00863 
00869       <span class="keyword">virtual</span> <a class="code" href="classstSlimTree.html#a2">~stSlimTree</a>();
00870 
00876       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="classstSlimTree.html#a3">Add</a>(ObjectType * newObj);
00877 
<a name="l00881"></a><a class="code" href="classstSlimTree.html#a4">00881</a>       <span class="keyword">virtual</span> <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimTree.html#a4">GetHeight</a>(){
00882          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o7">Height</a>;
00883       }<span class="comment">//end GetHeight</span>
00884 
<a name="l00888"></a><a class="code" href="classstSlimTree.html#a5">00888</a>       <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classstSlimTree.html#a5">GetNumberOfObjects</a>(){
00889          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o8">ObjectCount</a>;
00890       }<span class="comment">//end GetNumberOfObjects</span>
00891 
<a name="l00895"></a><a class="code" href="classstSlimTree.html#a6">00895</a>       <span class="keyword">virtual</span> <a class="code" href="group__types.html#a7">stCount</a> <a class="code" href="classstSlimTree.html#a6">GetMaxOccupation</a>(){
00896          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o6">MaxOccupation</a>;
00897       }<span class="comment">//end GetMaxOccupation</span>
00898 
<a name="l00902"></a><a class="code" href="classstSlimTree.html#a7">00902</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a7">SetMaxOccupation</a>(<a class="code" href="group__types.html#a7">stCount</a> newValue){
00903          <span class="keywordflow">if</span> (newValue &gt; Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o6">MaxOccupation</a>){
00904             Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o6">MaxOccupation</a> = newValue;
00905          }<span class="comment">//end if</span>
00906       }<span class="comment">//end SetMaxOccupation</span>
00907 
<a name="l00911"></a><a class="code" href="classstSlimTree.html#a8">00911</a>       <span class="keyword">virtual</span> <span class="keywordtype">double</span> <a class="code" href="classstSlimTree.html#a8">GetMinOccupation</a>(){
00912          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o5">MinOccupation</a>;
00913       }<span class="comment">//end GetMinOccupation</span>
00914 
<a name="l00918"></a><a class="code" href="classstSlimTree.html#a9">00918</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a9">SetMinOccupation</a>(<span class="keywordtype">double</span> min){
00919          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o5">MinOccupation</a> = min;
00920       }<span class="comment">//end SetMinOccupation</span>
00921 
<a name="l00925"></a><a class="code" href="classstSlimTree.html#a10">00925</a>       <span class="keyword">virtual</span> <span class="keywordtype">long</span> <a class="code" href="classstSlimTree.html#a10">GetNodeCount</a>(){
00926          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o9">NodeCount</a>;
00927       }<span class="comment">//end GetNodeCount</span>
00928 
00929       <span class="keywordtype">long</span> <a class="code" href="classstSlimTree.html#a11">GetIndexNodeCount</a>();
00930 
00931       <span class="keywordtype">long</span> <a class="code" href="classstSlimTree.html#a11">GetIndexNodeCount</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID);
00932 
00941       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstSlimTree.html#a13">GetDistanceLimit</a>();
00942 
00949       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstSlimTree.html#a14">GetGreaterEstimatedDistance</a>();
00950 
00957       <a class="code" href="group__types.html#a6">stDistance</a> <a class="code" href="classstSlimTree.html#a15">GetGreaterDistance</a>();
00958 
00959       <span class="comment">// Tree Configuration</span>
<a name="l00966"></a><a class="code" href="classstSlimTree.html#a16">00966</a> <span class="comment"></span>      <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a16">SetSplitMethod</a>(<span class="keyword">enum</span> tSplitMethod method){
00967          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o1">SplitMethod</a> = method;
00968          HeaderUpdate = <span class="keyword">true</span>;
00969       }<span class="comment">//end SetSplitMethod</span>
00970 
<a name="l00974"></a><a class="code" href="classstSlimTree.html#a17">00974</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimTree.html#a17">GetSplitMethod</a>(){
00975          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o1">SplitMethod</a>;
00976       }<span class="comment">//end GetSplitMethod</span>
00977 
<a name="l00984"></a><a class="code" href="classstSlimTree.html#a18">00984</a>       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a18">SetChooseMethod</a>(<span class="keyword">enum</span> tChooseMethod method){
00985          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o2">ChooseMethod</a> = method;
00986          HeaderUpdate = <span class="keyword">true</span>;
00987       }<span class="comment">//end SetChooseMethod</span>
00988 
<a name="l00992"></a><a class="code" href="classstSlimTree.html#a19">00992</a>       <span class="keywordtype">int</span> <a class="code" href="classstSlimTree.html#a19">GetChooseMethod</a>(){
00993          <span class="keywordflow">return</span> Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o2">ChooseMethod</a>;
00994       }<span class="comment">//end GetChooseMethod</span>
00995 
00996 <span class="preprocessor">      #ifdef __stDEBUG__</span>
00997 <span class="preprocessor"></span>
01003          <a class="code" href="group__types.html#a4">stPageID</a> GetRoot(){
01004             <span class="keywordflow">return</span> this-&gt;Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">Root</a>;
01005          }<span class="comment">//end GetRoot</span>
01006 <span class="preprocessor">      #endif //__stDEBUG__</span>
01007 <span class="preprocessor"></span>
<a name="l01015"></a><a class="code" href="classstSlimTree.html#a20">01015</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstSlimTree.html#a20">GetUserDataSize</a>(){
01016          <span class="keywordflow">return</span> 0;
01017       }<span class="comment">//end GetUserDataSize</span>
01018 
<a name="l01035"></a><a class="code" href="classstSlimTree.html#a21">01035</a>       <span class="keywordtype">bool</span> <a class="code" href="classstSlimTree.html#a21">WriteUserData</a>(<span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * userData, <a class="code" href="group__types.html#a5">stSize</a> size){
01036          <span class="keywordflow">return</span> <span class="keyword">false</span>;
01037       }<span class="comment">//end WriteUserData</span>
01038 
<a name="l01055"></a><a class="code" href="classstSlimTree.html#a22">01055</a>       <span class="keywordtype">bool</span> <a class="code" href="classstSlimTree.html#a22">ReadUserData</a>(<a class="code" href="group__types.html#a3">stByte</a> * userData, <a class="code" href="group__types.html#a5">stSize</a> size){
01056          <span class="keywordflow">return</span> <span class="keyword">false</span>;
01057       }<span class="comment">//end ReadUserData</span>
01058 
01069       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a23">RangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range);
01070 
01082       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a24">ReversedRangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range);
01083 
01097       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a25">LocalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01098 
01112       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a26">ListNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01113 
01130       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a27">NearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01131 
01148       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a28">FarthestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01149 
01166       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a29">PointQuery</a>(ObjectType * sample);
01167 
01183       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a30">IncrementalListNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01184                                             <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01185 
01201       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a31">IncrementalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01202                                         <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01203 
01223       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a32">InitializeIncrementalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01224                                              tResult * result,
01225                                              tPGenericHeap * globalQueue);
01226 
01246       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a32">InitializeIncrementalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01247                                              tResult * result,
01248                                              tGenericPriorityQueue * globalQueue);
01249 
01269       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a31">IncrementalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01270                                    tResult * result,
01271                                    tPGenericHeap * globalQueue);
01272 
01292       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a31">IncrementalNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k,
01293                                    tResult * result,
01294                                    tGenericPriorityQueue * globalQueue);
01295 
01312       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a36">KAndRangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01313                                <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie=<span class="keyword">false</span>);
01314 
01332       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a37">KOrRangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01333                               <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01334 
01355       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a38">SimpleKOrRangeQuery</a>(ObjectType * sample, <span class="keywordtype">double</span> fractalDimension,
01356                                     <a class="code" href="group__types.html#a6">stDistance</a> radiusKOrRange, <a class="code" href="group__types.html#a7">stCount</a> k,
01357                                     <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01358 
01371       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a39">RingQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> inRange,
01372                           <a class="code" href="group__types.html#a6">stDistance</a> outRange);
01373 
01388       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a40">KRingQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> inRange,
01389                            <a class="code" href="group__types.html#a6">stDistance</a> outRange, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01390 
01406       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a41">LocalKRingQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> inRange,
01407                                 <a class="code" href="group__types.html#a6">stDistance</a> outRange, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01408 
01421       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a42">LazyRangeQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01422                                <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01423 
01434       <a class="code" href="classstSlimTree.html#w1">tResult</a> * <a class="code" href="classstSlimTree.html#a43">AproximateNearestQuery</a>(ObjectType * sample, <a class="code" href="group__types.html#a7">stCount</a> k, <span class="keywordtype">bool</span> tie = <span class="keyword">false</span>);
01435 
01436 
01442       <span class="keywordtype">double</span> <a class="code" href="classstSlimTree.html#a44">GetFatFactor</a>();
01443 
01444       <span class="comment">// Visualization support</span>
01445 <span class="preprocessor">      #ifdef __stMAMVIEW__</span>
01446 <span class="preprocessor"></span>
<a name="l01452"></a><a class="code" href="classstSlimTree.html#a45">01452</a>          <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a45">MAMViewSetOutputDir</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * dir){
01453 
01454             MAMViewer-&gt;<a class="code" href="classstMAMViewExtractor.html#a19">SetOutputDir</a>(dir);
01455          }<span class="comment">//end MAMViewSetOutputDir</span>
01456 
01463          <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a46">MAMViewInit</a>();
01464 
01470          <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a47">MAMViewDumpTree</a>();
01471 <span class="preprocessor">      #endif //__stMAMVIEW__</span>
01472 <span class="preprocessor"></span>
01476       <span class="keyword">virtual</span> <a class="code" href="classstTreeInfoResult.html">stTreeInfoResult</a> * <a class="code" href="classstSlimTree.html#a48">GetTreeInfo</a>();
01477 
01485       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a49">Optimize</a>();
01486 
01487    <span class="keyword">private</span>:
01488 
01492       <span class="keyword">typedef</span> stSlimLogicNode &lt; ObjectType, EvaluatorType &gt; tLogicNode;
01493 
01497       <span class="keyword">typedef</span> stSlimMSTSplitter &lt; ObjectType, EvaluatorType &gt; tMSTSplitter;
01498       
01502       <span class="keyword">typedef</span> stRPriorityQueue &lt; stDistance, stCount &gt; tPriorityQueue;
01503 
01507       <span class="keyword">typedef</span> stDynamicRPriorityQueue &lt; stDistance, stQueryPriorityQueueValue &gt; tDynamicPriorityQueue;
01508 
01509       <span class="keyword">typedef</span> stDynamicRReversedPriorityQueue &lt; stDistance, stQueryPriorityQueueValue &gt; tDynamicReversedPriorityQueue;
01510 
01515       <span class="keyword">enum</span> stInsertAction{
01519          NO_ACT,
01520 
01524          CHANGE_REP,
01525 
01529          PROMOTION
01530       };<span class="comment">//end stInsertAction</span>
01531 
01536       <span class="keyword">struct </span><a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a>{
01540          ObjectType * Rep;
01541 
01545          <a class="code" href="group__types.html#a6">stDistance</a> Radius;
01546 
01550          <a class="code" href="group__types.html#a4">stPageID</a> RootID;
01551 
01555          <a class="code" href="group__types.html#a7">stCount</a> NObjects;
01556       };
01557 
01558       <span class="comment">// Visualization support</span>
01559 <span class="preprocessor">      #ifdef __stMAMVIEW__</span>
01560 <span class="preprocessor"></span>
01565          <span class="keyword">typedef</span> stMAMViewObjectSample &lt;ObjectType&gt; tObjectSample;
01566 
01573          <span class="keyword">typedef</span> stMAMViewExtractor &lt;ObjectType, EvaluatorType&gt; tViewExtractor;
01574 
01578          tViewExtractor * MAMViewer;
01579 <span class="preprocessor">      #endif //__stMAMVIEW__</span>
01580 <span class="preprocessor"></span>
01584       <span class="keywordtype">bool</span> HeaderUpdate;
01585 
01589       <a class="code" href="classstSlimTree.html#w0">stSlimHeader</a> * Header;
01590 
01595       <a class="code" href="classstPage.html">stPage</a> * HeaderPage;
01596 
01602       <span class="keywordtype">void</span> DefaultHeader();
01603 
01610       <span class="keywordtype">void</span> LoadHeader();
01611 
01615       <span class="keywordtype">void</span> WriteHeader(){
01616          <span class="keywordflow">if</span> (HeaderUpdate){
01617             <a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a2">WriteHeaderPage</a>(HeaderPage);
01618             HeaderUpdate = <span class="keyword">false</span>;
01619          }<span class="comment">//end if</span>
01620       }<span class="comment">//end WriteHeader</span>
01621 
01628       <span class="keywordtype">void</span> FlushHeader();
01629       
01633       <a class="code" href="classstPage.html">stPage</a> * NewPage(){
01634          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o9">NodeCount</a>++;
01635          <span class="keywordflow">return</span> this-&gt;<a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a6">GetNewPage</a>();
01636       }<span class="comment">//end NewPage</span>
01637       
01641       <span class="keywordtype">void</span> DisposePage(<a class="code" href="classstPage.html">stPage</a> * page){
01642          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o9">NodeCount</a>--;
01643          this-&gt;<a class="code" href="classstMetricTree.html#p0">myPageManager</a>-&gt;<a class="code" href="classstPageManager.html#a8">DisposePage</a>(page);
01644       }<span class="comment">//end DisposePage</span>
01645 
01654       <span class="keywordtype">int</span> ChooseSubTree(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * slimIndexNode, ObjectType * obj);
01655 
01663       <span class="keywordtype">void</span> RandomPromote(tLogicNode * node);
01664 
01671       <span class="keywordtype">void</span> MinMaxPromote(tLogicNode * node);
01672 
01686       <span class="keywordtype">void</span> ReDistribute(<a class="code" href="classstSlimNode.html">stSlimNode</a> * node, <span class="keywordtype">int</span> &amp; newCenter, <a class="code" href="group__types.html#a6">stDistance</a> &amp; newRadius);
01687 
01693       <span class="keywordtype">bool</span> IsRoot(<a class="code" href="group__types.html#a4">stPageID</a> nodeID){
01694          <span class="keywordflow">return</span> nodeID == this-&gt;Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">Root</a>;
01695       }<span class="comment">//end IsRoot</span>
01696 
01697 <span class="preprocessor">      #ifndef __stDEBUG__</span>
01698 <span class="preprocessor"></span>
01701          <a class="code" href="group__types.html#a4">stPageID</a> GetRoot(){
01702             <span class="keywordflow">return</span> this-&gt;Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">Root</a>;
01703          }<span class="comment">//end GetRoot</span>
01704 <span class="preprocessor">      #endif // __stDEBUG__</span>
01705 <span class="preprocessor"></span>
01709       <span class="keywordtype">void</span> SetRoot(<a class="code" href="group__types.html#a4">stPageID</a> root){
01710          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o4">Root</a> = root;
01711          HeaderUpdate = <span class="keyword">true</span>;
01712       }<span class="comment">//end SetRoot</span>
01713 
01717       <span class="keywordtype">void</span> UpdateObjectCounter(<span class="keywordtype">int</span> inc){
01718          Header-&gt;<a class="code" href="structstSlimTree_1_1tSlimHeader.html#o8">ObjectCount</a> += inc;
01719          HeaderUpdate = <span class="keyword">true</span>;
01720       }<span class="comment">//end UpdateObjectCounter</span>
01721 
01730       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a15">GetGreaterDistance</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, ObjectType ** objects,
01731                               <a class="code" href="group__types.html#a7">stCount</a> &amp; size);
01732 
01763       <span class="keywordtype">int</span> InsertRecursive(<a class="code" href="group__types.html#a4">stPageID</a> currNodeID, ObjectType * newObj,
01764                           ObjectType * repObj, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1,
01765                           <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2);
01766 
01779       <span class="keywordtype">void</span> AddNewRoot(ObjectType *obj1, <a class="code" href="group__types.html#a6">stDistance</a> radius1, <a class="code" href="group__types.html#a4">stPageID</a> nodeID1,
01780                       <a class="code" href="group__types.html#a7">stCount</a> nEntries1, ObjectType *obj2, <a class="code" href="group__types.html#a6">stDistance</a> radius2,
01781                       <a class="code" href="group__types.html#a4">stPageID</a> nodeID2, <a class="code" href="group__types.html#a7">stCount</a> nEntries2);
01782 
01800       <span class="keywordtype">void</span> SplitLeaf(<a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * oldNode, <a class="code" href="classstSlimLeafNode.html">stSlimLeafNode</a> * newNode,
01801                      ObjectType * newObj, ObjectType * prevRep,
01802                      <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2);
01803 
01832       <span class="keywordtype">void</span> SplitIndex(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * oldNode, <a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * newNode,
01833                       ObjectType * newObj1, <a class="code" href="group__types.html#a6">stDistance</a> newRadius1,
01834                       <a class="code" href="group__types.html#a4">stPageID</a> newNodeID1, <a class="code" href="group__types.html#a7">stCount</a> newNEntries1,
01835                       ObjectType * newObj2, <a class="code" href="group__types.html#a6">stDistance</a> newRadius2,
01836                       <a class="code" href="group__types.html#a4">stPageID</a> newNodeID2, <a class="code" href="group__types.html#a7">stCount</a> newNEntries2,
01837                       ObjectType * prevRep,
01838                       <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo1, <a class="code" href="structstSubtreeInfo.html">stSubtreeInfo</a> &amp; promo2);
01839 
01851       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a23">RangeQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
01852                       ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01853                       <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres);
01854 
01867       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a24">ReversedRangeQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
01868                               ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> range,
01869                               <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres);
01870 
01883       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a25">LocalNearestQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
01884                              ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> &amp; rangeK,
01885                              <a class="code" href="group__types.html#a7">stCount</a> k, <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres);
01886 
01899       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a26">ListNearestQuery</a>(tResult * result, ObjectType * sample, 
01900                             <a class="code" href="group__types.html#a6">stDistance</a> rangeK, <a class="code" href="group__types.html#a7">stCount</a> k);
01901 
01912       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a27">NearestQuery</a>(tResult * result, ObjectType * sample,
01913                         <a class="code" href="group__types.html#a6">stDistance</a> rangeK, <a class="code" href="group__types.html#a7">stCount</a> k);
01914 
01925       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a28">FarthestQuery</a>(tResult * result, ObjectType * sample,
01926                          <a class="code" href="group__types.html#a6">stDistance</a> rangeK, <a class="code" href="group__types.html#a7">stCount</a> k);
01927 
01944       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a29">PointQuery</a>(tResult * result, ObjectType * sample);
01945 
01962       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a36">KAndRangeQuery</a>(tResult * result, ObjectType * sample,
01963                           <a class="code" href="group__types.html#a6">stDistance</a> range, <a class="code" href="group__types.html#a7">stCount</a> k);
01964 
01982       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a37">KOrRangeQuery</a>(tResult * result, ObjectType * sample,
01983                          <a class="code" href="group__types.html#a6">stDistance</a> range, <a class="code" href="group__types.html#a7">stCount</a> k);
01984 
01999       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a39">RingQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
02000                      ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> inRange,
02001                      <a class="code" href="group__types.html#a6">stDistance</a> outRange, <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres);
02002 
02016       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a40">KRingQuery</a>(tResult * result, ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> inRange,
02017                       <a class="code" href="group__types.html#a6">stDistance</a> &amp; outRange, <a class="code" href="group__types.html#a7">stCount</a> k);
02018 
02036       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a41">LocalKRingQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result, ObjectType * sample,
02037                            <a class="code" href="group__types.html#a6">stDistance</a> inRange, <a class="code" href="group__types.html#a6">stDistance</a> &amp; outRange, <a class="code" href="group__types.html#a7">stCount</a> k,
02038                            <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres);
02039 
02052       <span class="keywordtype">void</span> <a class="code" href="classstSlimTree.html#a42">LazyRangeQuery</a>(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tResult * result,
02053                           ObjectType * sample, <a class="code" href="group__types.html#a6">stDistance</a> &amp; range, <a class="code" href="group__types.html#a7">stCount</a> k,
02054                           <a class="code" href="group__types.html#a6">stDistance</a> distanceRepres, <span class="keywordtype">bool</span> &amp; stop);
02055 
02059       <span class="keywordtype">void</span> UpdateDistances(<a class="code" href="classstSlimIndexNode.html">stSlimIndexNode</a> * node, ObjectType * repObj,
02060                            <a class="code" href="group__types.html#a7">stCount</a> repObjIdx);
02061 
02062       <span class="comment">// Visualization support</span>
02063 <span class="preprocessor">      #ifdef __stMAMVIEW__</span>
02064 <span class="preprocessor"></span>
02072          tObjectSample * GetSample(<span class="keywordtype">int</span> sampleSize);
02073 
02082          <span class="keywordtype">void</span> GetSampleRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, tObjectSample * sample);
02083 
02091          <span class="keywordtype">void</span> MAMViewDumpTreeRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, ObjectType * rep,
02092                                        <a class="code" href="group__types.html#a6">stDistance</a> radius, <a class="code" href="group__types.html#a4">stPageID</a> parent);
02093                                        
02094 <span class="preprocessor">      #endif //__stMAMVIEW__</span>
02095 <span class="preprocessor"></span>
02103       <span class="keywordtype">void</span> GetTreeInfoRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, <span class="keywordtype">int</span> level,
02104                                 <a class="code" href="classstTreeInformation.html">stTreeInformation</a> * info);
02105 
02115       <span class="keywordtype">void</span> ObjectIntersectionsRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, ObjectType * obj,
02116                                         <span class="keywordtype">int</span> level, <a class="code" href="classstTreeInformation.html">stTreeInformation</a> * info);
02117             
02118 
02119       <span class="comment">// Slimdown implementaion</span>
02132 <span class="comment"></span>      <a class="code" href="group__types.html#a6">stDistance</a> SlimDownRecursive(<a class="code" href="group__types.html#a4">stPageID</a> pageID, <span class="keywordtype">int</span> level);
02133 
02140       <a class="code" href="group__types.html#a6">stDistance</a> SlimDown(<a class="code" href="group__types.html#a4">stPageID</a> pageID);
02141 
02149       <span class="keywordtype">void</span> LocalSlimDown(tMemLeafNode ** memLeafNodes, <span class="keywordtype">int</span> nodeCount, <span class="keywordtype">int</span> maxSwaps);
02150 
02163       <span class="keywordtype">bool</span> SlimDownCanSwap(tMemLeafNode * src, tMemLeafNode * dst,
02164                            <a class="code" href="group__types.html#a6">stDistance</a> &amp; distance);
02165                            
02166 };<span class="comment">//end stSlimTree</span>
02167 
02168 <span class="comment">// Include implementation</span>
02169 <span class="preprocessor">#include "stSlimTree.cc"</span>
02170 
02171 <span class="preprocessor">#endif //__STSLIMTREE_H</span>
02172 <span class="preprocessor"></span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon Mar 21 16:12:06 2005 for GBDI Arboretum by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.3.4</small><br>
Copyright &copy 2002-2003 GBDI-ICMC-USP
</address>
</body>
</html>
