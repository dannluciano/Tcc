<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stBasicObjects.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<h1>GBDI Arboretum<br><small>Version Release 1</small></h1>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>stBasicObjects.h</h1><a href="stBasicObjects_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/**********************************************************************</span>
00002 <span class="comment">* GBDI Arboretum - Copyright (c) 2002-2004 GBDI-ICMC-USP</span>
00003 <span class="comment">*</span>
00004 <span class="comment">*                           Homepage: http://gbdi.icmc.usp.br/arboretum</span>
00005 <span class="comment">**********************************************************************/</span>
00006 <span class="comment">/* ====================================================================</span>
00007 <span class="comment"> * The GBDI-ICMC-USP Software License Version 1.0</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Copyright (c) 2004 Grupo de Bases de Dados e Imagens, Instituto de</span>
00010 <span class="comment"> * Ciências Matemáticas e de Computação, University of São Paulo -</span>
00011 <span class="comment"> * Brazil (the Databases and Image Group - Intitute of Matematical and </span>
00012 <span class="comment"> * Computer Sciences).  All rights reserved.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00015 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00016 <span class="comment"> * are met:</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00019 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00022 <span class="comment"> *    notice, this list of conditions and the following disclaimer in</span>
00023 <span class="comment"> *    the documentation and/or other materials provided with the</span>
00024 <span class="comment"> *    distribution.</span>
00025 <span class="comment"> *</span>
00026 <span class="comment"> * 3. The end-user documentation included with the redistribution,</span>
00027 <span class="comment"> *    if any, must include the following acknowledgment:</span>
00028 <span class="comment"> *       "This product includes software developed by Grupo de Bases</span>
00029 <span class="comment"> *        de Dados e Imagens, Instituto de Ciências Matemáticas e de</span>
00030 <span class="comment"> *        Computação, University of São Paulo - Brazil (the Databases </span>
00031 <span class="comment"> *        and Image Group - Intitute of Matematical and Computer </span>
00032 <span class="comment"> *        Sciences)"</span>
00033 <span class="comment"> *</span>
00034 <span class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</span>
00035 <span class="comment"> *    if and wherever such third-party acknowledgments normally appear.</span>
00036 <span class="comment"> *</span>
00037 <span class="comment"> * 4. The names of the research group, institute, university, authors</span>
00038 <span class="comment"> *    and collaborators must not be used to endorse or promote products</span>
00039 <span class="comment"> *    derived from this software without prior written permission.</span>
00040 <span class="comment"> *</span>
00041 <span class="comment"> * 5. The names of products derived from this software may not contain</span>
00042 <span class="comment"> *    the name of research group, institute or university, without prior</span>
00043 <span class="comment"> *    written permission of the authors of this software.</span>
00044 <span class="comment"> *</span>
00045 <span class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</span>
00046 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
00047 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
00048 <span class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OF THIS SOFTWARE OR</span>
00049 <span class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
00050 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
00051 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
00052 <span class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
00053 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
00054 <span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
00055 <span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
00056 <span class="comment"> * SUCH DAMAGE.</span>
00057 <span class="comment"> *</span>
00058 <span class="comment"> * ====================================================================</span>
00059 <span class="comment"> *                                            http://gbdi.icmc.usp.br/</span>
00060 <span class="comment"> */</span>
00072 <span class="comment">// Copyright (c) 2002-2003 GBDI-ICMC-USP</span>
00073 <span class="preprocessor">#ifndef __STBASICOBJECTS_H</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#define __STBASICOBJECTS_H</span>
00075 <span class="preprocessor"></span>
00076 <span class="preprocessor">#include &lt;<a class="code" href="stTypes_8h.html">arboretum/stTypes.h</a>&gt;</span>
00077 <span class="preprocessor">#include &lt;<a class="code" href="stException_8h.html">arboretum/stException.h</a>&gt;</span>
00078 <span class="preprocessor">#include &lt;<a class="code" href="stObject_8h.html">arboretum/stObject.h</a>&gt;</span>
00079 
00080 <span class="comment">//==============================================================================</span>
00081 <span class="comment">//  class stBasicArrayObject</span>
00082 <span class="comment">//------------------------------------------------------------------------------</span>
00111 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> DataType, <span class="keyword">class</span> OIDType = <span class="keywordtype">int</span>&gt;
<a name="l00112"></a><a class="code" href="classstBasicArrayObject.html">00112</a> <span class="keyword">class </span><a class="code" href="classstBasicArrayObject.html">stBasicArrayObject</a> : <span class="keyword">public</span> <a class="code" href="classstObject.html">stObject</a>{
00113    <span class="keyword">public</span>:
<a name="l00120"></a><a class="code" href="classstBasicArrayObject.html#a0">00120</a>       <a class="code" href="classstBasicArrayObject.html#a0">stBasicArrayObject</a>(){
00121          Size = 0;
00122          TrueData = NULL;
00123          Data = NULL;
00124          OID = NULL;
00125       }<span class="comment">//end stBasicArrayObject</span>
00126 
<a name="l00135"></a><a class="code" href="classstBasicArrayObject.html#a1">00135</a>       <a class="code" href="classstBasicArrayObject.html#a0">stBasicArrayObject</a>(<a class="code" href="group__types.html#a5">stSize</a> n, <span class="keyword">const</span> DataType * data = NULL){
00136 
00137          <span class="comment">// Allocate data</span>
00138          Size = 0;
00139          TrueData = NULL;
00140          Data = NULL;
00141          OID = NULL;
00142          SetSize(n);
00143 
00144          <span class="comment">// Initialize values</span>
00145          <span class="keywordflow">if</span> (data != NULL){
00146             <a class="code" href="classstBasicArrayObject.html#a3">SetData</a>(data);
00147          }<span class="comment">//end if</span>
00148       }<span class="comment">//end stBasicArrayObject</span>
00149 
<a name="l00153"></a><a class="code" href="classstBasicArrayObject.html#a2">00153</a>       <span class="keyword">virtual</span> <a class="code" href="classstBasicArrayObject.html#a2">~stBasicArrayObject</a>(){
00154 
00155          <span class="keywordflow">if</span> (TrueData != NULL){
00156             <span class="keyword">delete</span>[] TrueData;
00157          }<span class="comment">//end if</span>
00158       }<span class="comment">//end ~stBasicArrayObject</span>
00159 
<a name="l00166"></a><a class="code" href="classstBasicArrayObject.html#a3">00166</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicArrayObject.html#a3">SetData</a>(<span class="keyword">const</span> DataType * data){
00167 
00168          memcpy(Data, data, <span class="keyword">sizeof</span>(DataType) * Size);
00169       }<span class="comment">//end SetData</span>
00170 
<a name="l00174"></a><a class="code" href="classstBasicArrayObject.html#a4">00174</a>       DataType * <a class="code" href="classstBasicArrayObject.html#a4">GetData</a>(){
00175           <span class="keywordflow">return</span> Data;
00176       }<span class="comment">//end GetData</span>
00177 
<a name="l00181"></a><a class="code" href="classstBasicArrayObject.html#a5">00181</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstBasicArrayObject.html#a5">GetSize</a>(){
00182          <span class="keywordflow">return</span> Size;
00183       }<span class="comment">//end stSize</span>
00184 
<a name="l00192"></a><a class="code" href="classstBasicArrayObject.html#a6">00192</a>       DataType &amp; <a class="code" href="classstBasicArrayObject.html#a6">operator [] </a>(<span class="keywordtype">int</span> idx){
00193          <span class="keywordflow">return</span> Data[idx];
00194       }<span class="comment">//end operator []</span>
00195 
00202       DataType <a class="code" href="classstBasicArrayObject.html#a7">Get</a>(<a class="code" href="group__types.html#a7">stCount</a> idx);
00203 
<a name="l00209"></a><a class="code" href="classstBasicArrayObject.html#a8">00209</a>       <span class="keywordtype">long</span> <a class="code" href="classstBasicArrayObject.html#a8">GetOID</a>(){
00210          <span class="keywordflow">if</span> (OID == NULL){
00211             <span class="keywordflow">return</span> 0;
00212          }<span class="keywordflow">else</span>{
00213             <span class="keywordflow">return</span> * OID;
00214          }<span class="comment">//end if</span>
00215       }<span class="comment">//end GetOID</span>
00216 
<a name="l00223"></a><a class="code" href="classstBasicArrayObject.html#a9">00223</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicArrayObject.html#a9">SetOID</a>(OIDType oid){
00224          <span class="keywordflow">if</span> (OID != NULL){
00225             *OID = oid;
00226          }<span class="comment">//end if</span>
00227       }<span class="comment">//end SetOID</span>
00228 
00229       <span class="comment">// stObject interface</span>
<a name="l00233"></a><a class="code" href="classstBasicArrayObject.html#a10">00233</a> <span class="comment"></span>      <a class="code" href="classstBasicArrayObject.html">stBasicArrayObject</a> * <a class="code" href="classstBasicArrayObject.html#a10">Clone</a>(){
00234          <a class="code" href="classstBasicArrayObject.html">stBasicArrayObject</a> * tmp = <span class="keyword">new</span> <a class="code" href="classstBasicArrayObject.html#a0">stBasicArrayObject</a>(Size, Data);
00235          tmp-&gt;<a class="code" href="classstBasicArrayObject.html#a9">SetOID</a>(this-&gt;GetOID());
00236          <span class="keywordflow">return</span> tmp;
00237       }<span class="comment">//end Clone</span>
00238 
<a name="l00242"></a><a class="code" href="classstBasicArrayObject.html#a11">00242</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstBasicArrayObject.html#a11">GetSerializedSize</a>(){
00243          <span class="keywordflow">return</span> <span class="keyword">sizeof</span>(DataType) * Size + <span class="keyword">sizeof</span>(OIDType);
00244       }<span class="comment">//end GetSerializedSize</span>
00245 
<a name="l00249"></a><a class="code" href="classstBasicArrayObject.html#a12">00249</a>       <span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * <a class="code" href="classstBasicArrayObject.html#a12">Serialize</a>(){
00250          <span class="keywordflow">return</span> TrueData;
00251       }<span class="comment">//end Serialize</span>
00252 
<a name="l00256"></a><a class="code" href="classstBasicArrayObject.html#a13">00256</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicArrayObject.html#a13">Unserialize</a>(<span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * data, <a class="code" href="group__types.html#a5">stSize</a> dataSize){
00257 
00258          <span class="comment">// Resize data</span>
00259          SetSize((dataSize - <span class="keyword">sizeof</span>(OIDType)) / <span class="keyword">sizeof</span>(DataType));
00260 
00261          memcpy(TrueData, data, dataSize);
00262       }<span class="comment">//end Unserialize</span>
00263 
00267       <span class="keywordtype">bool</span> <a class="code" href="classstBasicArrayObject.html#a14">IsEqual</a>(<a class="code" href="classstObject.html">stObject</a> * obj);
00268       
00269    <span class="keyword">private</span>:
00270    
00274       DataType * Data;
00275 
00279       OIDType * OID;
00280 
00285       <a class="code" href="group__types.html#a3">stByte</a> * TrueData;
00286 
00290       <a class="code" href="group__types.html#a5">stSize</a> Size;
00291 
00297       <span class="keywordtype">void</span> SetSize(<a class="code" href="group__types.html#a5">stSize</a> n){
00298 
00299          <span class="keywordflow">if</span> (Size != n){
00300             <span class="keywordflow">if</span> (TrueData != NULL){
00301                <span class="keyword">delete</span>[] TrueData;
00302             }<span class="comment">//end if</span>
00303 
00304             <span class="comment">// Create array.</span>
00305             TrueData = <span class="keyword">new</span> <a class="code" href="group__types.html#a3">stByte</a>[(<span class="keyword">sizeof</span>(DataType) * n) + <span class="keyword">sizeof</span>(OIDType)];
00306             Size = n;
00307             OID = (OIDType *)TrueData;
00308             Data = (DataType *) (TrueData + <span class="keyword">sizeof</span>(OIDType));
00309             *OID = 0; <span class="comment">// Set OID to 0</span>
00310          }<span class="comment">//end if</span>
00311       }<span class="comment">//end SetSize</span>
00312 };<span class="comment">//end stBasicArrayObject</span>
00313 
00314 
00315 <span class="comment">//==============================================================================</span>
00316 <span class="comment">//  class stBasicStringObject</span>
00317 <span class="comment">//------------------------------------------------------------------------------</span>
00351 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> DataType, <span class="keyword">class</span> OIDType = <span class="keywordtype">int</span>&gt;
<a name="l00352"></a><a class="code" href="classstBasicStringObject.html">00352</a> <span class="keyword">class </span><a class="code" href="classstBasicStringObject.html">stBasicStringObject</a>{
00353    <span class="keyword">public</span>:
<a name="l00360"></a><a class="code" href="classstBasicStringObject.html#a0">00360</a>       <a class="code" href="classstBasicStringObject.html#a0">stBasicStringObject</a>(){
00361          Len = 0;
00362          TrueLen = 0;
00363          TrueData = NULL;
00364          Data = NULL;
00365          OID = NULL;
00366       }<span class="comment">//end stBasicStringObject</span>
00367 
<a name="l00374"></a><a class="code" href="classstBasicStringObject.html#a1">00374</a>       <a class="code" href="classstBasicStringObject.html#a0">stBasicStringObject</a>(<span class="keyword">const</span> DataType * str){
00375 
00376          TrueLen = 0;
00377          Len = 0;
00378          Data = NULL;
00379          OID = NULL;
00380          TrueData = NULL;
00381          <span class="comment">// Initializing...</span>
00382          <a class="code" href="classstBasicStringObject.html#a10">SetString</a>(str);
00383       }<span class="comment">//end stBasicStringObject</span>
00384 
<a name="l00391"></a><a class="code" href="classstBasicStringObject.html#a2">00391</a>       <a class="code" href="classstBasicStringObject.html#a0">stBasicStringObject</a>(<a class="code" href="classstBasicStringObject.html">stBasicStringObject</a> * str){
00392 
00393          TrueLen = 0;
00394          TrueData = NULL;
00395          Len = str-&gt;<a class="code" href="classstBasicStringObject.html#r3">Len</a>;
00396          SetSize(Len);
00397 
00398          <span class="comment">// Initializing...</span>
00399          memcpy(TrueData, str-&gt;<a class="code" href="classstBasicStringObject.html#r2">TrueData</a>, <span class="keyword">sizeof</span>(DataType) * (Len + 1) + <span class="keyword">sizeof</span>(OIDType));
00400       }<span class="comment">//end stBasicStringObject</span>
00401 
<a name="l00405"></a><a class="code" href="classstBasicStringObject.html#a3">00405</a>       <span class="keyword">virtual</span> <a class="code" href="classstBasicStringObject.html#a3">~stBasicStringObject</a>(){
00406 
00407          <span class="keywordflow">if</span> (TrueData != NULL){
00408             <span class="keyword">delete</span>[] TrueData;
00409          }<span class="comment">//end if</span>
00410       }<span class="comment">//end ~stBasicStringObject</span>
00411 
<a name="l00416"></a><a class="code" href="classstBasicStringObject.html#a4">00416</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstBasicStringObject.html#a4">GetSize</a>(){
00417          <span class="keywordflow">return</span> Len;
00418       }<span class="comment">//end GetSize</span>
00419 
<a name="l00423"></a><a class="code" href="classstBasicStringObject.html#a5">00423</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstBasicStringObject.html#a5">GetLength</a>(){
00424          <span class="keywordflow">return</span> Len;
00425       }<span class="comment">//end GetLength</span>
00426 
<a name="l00434"></a><a class="code" href="classstBasicStringObject.html#a6">00434</a>       DataType &amp; <a class="code" href="classstBasicStringObject.html#a6">operator [] </a>(<span class="keywordtype">int</span> idx){
00435          <span class="keywordflow">return</span> Data[idx];
00436       }<span class="comment">//end operator []</span>
00437 
<a name="l00444"></a><a class="code" href="classstBasicStringObject.html#a7">00444</a>       DataType <a class="code" href="classstBasicStringObject.html#a7">Get</a>(<span class="keywordtype">int</span> idx){
00445          <span class="keywordflow">if</span> ((idx &lt; 0) || (idx &gt;= Len)){
00446             <span class="keywordflow">throw</span> out_of_range(<span class="stringliteral">"Index out of range."</span>);
00447          }<span class="keywordflow">else</span>{
00448             <span class="keywordflow">return</span> Data[idx];
00449          }<span class="comment">//end if</span>
00450       }<span class="comment">//end Get</span>
00451 
<a name="l00457"></a><a class="code" href="classstBasicStringObject.html#a8">00457</a>       OIDType <a class="code" href="classstBasicStringObject.html#a8">GetOID</a>(){
00458 
00459          <span class="keywordflow">if</span> (OID == NULL){
00460             <span class="keywordflow">return</span> 0;
00461          }<span class="keywordflow">else</span>{
00462             <span class="keywordflow">return</span> *OID;
00463          }<span class="comment">//end if</span>
00464       }<span class="comment">//end GetOID</span>
00465 
<a name="l00472"></a><a class="code" href="classstBasicStringObject.html#a9">00472</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicStringObject.html#a9">SetOID</a>(OIDType oid){
00473          <span class="keywordflow">if</span> (OID != NULL){
00474             *OID = oid;
00475          }<span class="comment">//end if</span>
00476       }<span class="comment">//end SetOID</span>
00477 
<a name="l00484"></a><a class="code" href="classstBasicStringObject.html#a10">00484</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicStringObject.html#a10">SetString</a>(<span class="keyword">const</span> DataType * str){
00485 
00486          Len = StrLen(str);
00487          SetSize(Len);
00488          memcpy(Data, str, <span class="keyword">sizeof</span>(DataType) * (Len + 1));
00489       }<span class="comment">//end SetString</span>
00490 
<a name="l00498"></a><a class="code" href="classstBasicStringObject.html#a11">00498</a>       <span class="keyword">const</span> DataType * <a class="code" href="classstBasicStringObject.html#a11">GetString</a>(){
00499          <span class="keywordflow">return</span> Data;
00500       }<span class="comment">//end GetString</span>
00501 
00502       <span class="comment">// stObject interface</span>
<a name="l00506"></a><a class="code" href="classstBasicStringObject.html#a12">00506</a> <span class="comment"></span>      <a class="code" href="classstBasicStringObject.html">stBasicStringObject</a> * <a class="code" href="classstBasicStringObject.html#a12">Clone</a>(){
00507          <a class="code" href="classstBasicStringObject.html">stBasicStringObject</a> * tmp = <span class="keyword">new</span> <a class="code" href="classstBasicStringObject.html#a0">stBasicStringObject</a>(<span class="keyword">this</span>);
00508          tmp-&gt;<a class="code" href="classstBasicStringObject.html#a9">SetOID</a>(this-&gt;GetOID());
00509          <span class="keywordflow">return</span> tmp;
00510       }<span class="comment">//end Clone</span>
00511 
<a name="l00515"></a><a class="code" href="classstBasicStringObject.html#a13">00515</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstBasicStringObject.html#a13">GetSerializedSize</a>(){
00516          <span class="keywordflow">return</span> (<span class="keyword">sizeof</span>(DataType) * Len) + <span class="keyword">sizeof</span>(OIDType);
00517       }<span class="comment">//end GetSerializedSize</span>
00518 
<a name="l00522"></a><a class="code" href="classstBasicStringObject.html#a14">00522</a>       <span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * <a class="code" href="classstBasicStringObject.html#a14">Serialize</a>(){
00523          <span class="keywordflow">return</span> TrueData;
00524       }<span class="comment">//end Serialize</span>
00525 
<a name="l00529"></a><a class="code" href="classstBasicStringObject.html#a15">00529</a>       <span class="keywordtype">void</span> <a class="code" href="classstBasicStringObject.html#a15">Unserialize</a>(<span class="keyword">const</span> <a class="code" href="group__types.html#a3">stByte</a> * data, <a class="code" href="group__types.html#a5">stSize</a> dataSize){
00530 
00531          <span class="comment">// How many entries</span>
00532          Len = (dataSize - <span class="keyword">sizeof</span>(OIDType)) / <span class="keyword">sizeof</span>(DataType);
00533 
00534          <span class="comment">// Resize TrueData to accomodate the new object</span>
00535          SetSize(Len);
00536          memcpy(TrueData, data, dataSize);
00537          Data[Len] = <span class="charliteral">'\0'</span>; <span class="comment">// Null!!!</span>
00538       }<span class="comment">//end Unserialize</span>
00539 
00543       <span class="keywordtype">bool</span> <a class="code" href="classstBasicStringObject.html#a16">IsEqual</a>(<a class="code" href="classstBasicStringObject.html">stBasicStringObject</a> * obj);
00544 
00545    <span class="keyword">private</span>:
00546    
00550       DataType * Data;
00551 
00555       OIDType * OID;
00556 
00562       <a class="code" href="group__types.html#a3">stByte</a> * TrueData;
00563 
00567       <a class="code" href="group__types.html#a5">stSize</a> Len;
00568 
00572       <a class="code" href="group__types.html#a5">stSize</a> TrueLen;
00573 
00579       <span class="keywordtype">int</span> StrLen(<span class="keyword">const</span> DataType * str);
00580 
00586       <span class="keywordtype">void</span> SetSize(<a class="code" href="group__types.html#a5">stSize</a> len){
00587          <span class="comment">// Do not modify Len.</span>
00588          OIDType oldOid;
00589 
00590          <span class="comment">// This string will grow forever ! Or at least until it is not discarded.</span>
00591          <span class="keywordflow">if</span> (TrueLen &lt; len + 1){
00592             <span class="comment">// I must resize it.</span>
00593             <span class="keywordflow">if</span> (TrueData != NULL){
00594                oldOid = *OID;
00595                <span class="keyword">delete</span>[] TrueData;
00596             }<span class="keywordflow">else</span>{
00597                oldOid = 0;
00598             }<span class="comment">//end if</span>
00599 
00600             <span class="comment">// Allocate</span>
00601             TrueData = <span class="keyword">new</span> <a class="code" href="group__types.html#a3">stByte</a>[(<span class="keyword">sizeof</span>(DataType) * (len + 1)) + <span class="keyword">sizeof</span>(OIDType)];
00602             TrueLen = len;
00603             OID = (OIDType*)TrueData;
00604             Data = (DataType*)(TrueData + <span class="keyword">sizeof</span>(OIDType));
00605             *OID = oldOid;
00606          }<span class="comment">//end if</span>
00607       }<span class="comment">//end SetSize</span>
00608       
00609 };<span class="comment">//end stBasicStringObject</span>
00610 
00611 <span class="comment">// Include implementation</span>
00612 <span class="preprocessor">#include "stBasicObjects.cc"</span>
00613 
00614 <span class="preprocessor">#endif //__STBASICOBJECTS_H</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon Mar 21 16:12:05 2005 for GBDI Arboretum by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.3.4</small><br>
Copyright &copy 2002-2003 GBDI-ICMC-USP
</address>
</body>
</html>
