<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>stMAMView.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<h1>GBDI Arboretum<br><small>Version Release 1</small></h1>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="namespaces.html">Namespace List</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="classes.html">Alphabetical&nbsp;List</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>stMAMView.h</h1><a href="stMAMView_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <span class="comment">/**********************************************************************</span>
00002 <span class="comment">* GBDI Arboretum - Copyright (c) 2002-2004 GBDI-ICMC-USP</span>
00003 <span class="comment">*</span>
00004 <span class="comment">*                           Homepage: http://gbdi.icmc.usp.br/arboretum</span>
00005 <span class="comment">**********************************************************************/</span>
00006 <span class="comment">/* ====================================================================</span>
00007 <span class="comment"> * The GBDI-ICMC-USP Software License Version 1.0</span>
00008 <span class="comment"> *</span>
00009 <span class="comment"> * Copyright (c) 2004 Grupo de Bases de Dados e Imagens, Instituto de</span>
00010 <span class="comment"> * Ciências Matemáticas e de Computação, University of São Paulo -</span>
00011 <span class="comment"> * Brazil (the Databases and Image Group - Intitute of Matematical and </span>
00012 <span class="comment"> * Computer Sciences).  All rights reserved.</span>
00013 <span class="comment"> *</span>
00014 <span class="comment"> * Redistribution and use in source and binary forms, with or without</span>
00015 <span class="comment"> * modification, are permitted provided that the following conditions</span>
00016 <span class="comment"> * are met:</span>
00017 <span class="comment"> *</span>
00018 <span class="comment"> * 1. Redistributions of source code must retain the above copyright</span>
00019 <span class="comment"> *    notice, this list of conditions and the following disclaimer.</span>
00020 <span class="comment"> *</span>
00021 <span class="comment"> * 2. Redistributions in binary form must reproduce the above copyright</span>
00022 <span class="comment"> *    notice, this list of conditions and the following disclaimer in</span>
00023 <span class="comment"> *    the documentation and/or other materials provided with the</span>
00024 <span class="comment"> *    distribution.</span>
00025 <span class="comment"> *</span>
00026 <span class="comment"> * 3. The end-user documentation included with the redistribution,</span>
00027 <span class="comment"> *    if any, must include the following acknowledgment:</span>
00028 <span class="comment"> *       "This product includes software developed by Grupo de Bases</span>
00029 <span class="comment"> *        de Dados e Imagens, Instituto de Ciências Matemáticas e de</span>
00030 <span class="comment"> *        Computação, University of São Paulo - Brazil (the Databases </span>
00031 <span class="comment"> *        and Image Group - Intitute of Matematical and Computer </span>
00032 <span class="comment"> *        Sciences)"</span>
00033 <span class="comment"> *</span>
00034 <span class="comment"> *    Alternately, this acknowledgment may appear in the software itself,</span>
00035 <span class="comment"> *    if and wherever such third-party acknowledgments normally appear.</span>
00036 <span class="comment"> *</span>
00037 <span class="comment"> * 4. The names of the research group, institute, university, authors</span>
00038 <span class="comment"> *    and collaborators must not be used to endorse or promote products</span>
00039 <span class="comment"> *    derived from this software without prior written permission.</span>
00040 <span class="comment"> *</span>
00041 <span class="comment"> * 5. The names of products derived from this software may not contain</span>
00042 <span class="comment"> *    the name of research group, institute or university, without prior</span>
00043 <span class="comment"> *    written permission of the authors of this software.</span>
00044 <span class="comment"> *</span>
00045 <span class="comment"> * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED</span>
00046 <span class="comment"> * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES</span>
00047 <span class="comment"> * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span>
00048 <span class="comment"> * DISCLAIMED.  IN NO EVENT SHALL THE AUTHORS OF THIS SOFTWARE OR</span>
00049 <span class="comment"> * ITS CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,</span>
00050 <span class="comment"> * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT</span>
00051 <span class="comment"> * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF</span>
00052 <span class="comment"> * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND</span>
00053 <span class="comment"> * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span>
00054 <span class="comment"> * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT</span>
00055 <span class="comment"> * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF</span>
00056 <span class="comment"> * SUCH DAMAGE.</span>
00057 <span class="comment"> *</span>
00058 <span class="comment"> * ====================================================================</span>
00059 <span class="comment"> *                                            http://gbdi.icmc.usp.br/</span>
00060 <span class="comment"> */</span>
00072 <span class="comment">// Copyright (c) 2002 GBDI-ICMC-USP</span>
00073 <span class="preprocessor">#ifndef __STMAMVIEW_H</span>
00074 <span class="preprocessor"></span><span class="preprocessor">#define __STMAMVIEW_H</span>
00075 <span class="preprocessor"></span>
00076 <span class="preprocessor">#include &lt;<a class="code" href="stCommon_8h.html">arboretum/stCommon.h</a>&gt;</span>
00077 <span class="preprocessor">#include &lt;<a class="code" href="stUtil_8h.html">arboretum/stUtil.h</a>&gt;</span>
00078 <span class="preprocessor">#include &lt;<a class="code" href="stResult_8h.html">arboretum/stResult.h</a>&gt;</span>
00079 <span class="preprocessor">#include &lt;<a class="code" href="stTypes_8h.html">arboretum/stTypes.h</a>&gt;</span>
00080 <span class="preprocessor">#include &lt;<a class="code" href="stFastMapper_8h.html">arboretum/stFastMapper.h</a>&gt;</span>
00081 <span class="preprocessor">#include &lt;<a class="code" href="stException_8h.html">arboretum/stException.h</a>&gt;</span>
00082 <span class="preprocessor">#include &lt;string&gt;</span>
00083 <span class="preprocessor">#include &lt;stack&gt;</span>
00084 
00085 <span class="preprocessor">#ifndef __stMAMVIEW__</span>
00086 <span class="preprocessor"></span>
00091 <span class="preprocessor">#define stMAMViewVersion "Not supported"</span>
00092 <span class="preprocessor"></span>
00093 <span class="preprocessor">#else</span>
00094 <span class="preprocessor"></span>
<a name="l00099"></a><a class="code" href="group__mamview.html#a0">00099</a> <span class="preprocessor">#define stMAMViewVersion "0.1"</span>
00100 <span class="preprocessor"></span>
00101 <span class="comment">//----------------------------------------------------------------------------</span>
00102 <span class="comment">// Exception unsupported_method_error</span>
00103 <span class="comment">//----------------------------------------------------------------------------</span>
<a name="l00114"></a><a class="code" href="classmamview__error.html">00114</a> <span class="comment"></span><span class="keyword">class </span><a class="code" href="classmamview__error.html">mamview_error</a>: <span class="keyword">public</span> logic_error{
00115    <span class="keyword">public</span>:
<a name="l00116"></a><a class="code" href="classmamview__error.html#a0">00116</a>       <a class="code" href="classmamview__error.html#a0">mamview_error</a>(<span class="keyword">const</span> string &amp;what_arg): logic_error(what_arg){
00117       }<span class="comment">//end mamview_error</span>
00118 };<span class="comment">//end mamview_error</span>
00119 
00120 <span class="comment">//-----------------------------------------------------------------------------</span>
00121 <span class="comment">// class stMAMViewObjectSample</span>
00122 <span class="comment">//-----------------------------------------------------------------------------</span>
00143 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType&gt;
<a name="l00144"></a><a class="code" href="classstMAMViewObjectSample.html">00144</a> <span class="keyword">class </span><a class="code" href="classstMAMViewObjectSample.html">stMAMViewObjectSample</a>{
00145    <span class="keyword">public</span>:
<a name="l00156"></a><a class="code" href="classstMAMViewObjectSample.html#a0">00156</a>       <a class="code" href="classstMAMViewObjectSample.html#a0">stMAMViewObjectSample</a>(<a class="code" href="group__types.html#a5">stSize</a> size, <a class="code" href="group__types.html#a5">stSize</a> total){
00157          <span class="comment">// Calculate the acceptance an object. </span>
00158          P = ((<span class="keywordtype">double</span>)size)/((<span class="keywordtype">double</span>)total);
00159          MaxSize = size;
00160          Size = 0;
00161          Objs = <span class="keyword">new</span> ObjectType *[MaxSize];
00162       }<span class="comment">//end stMAMViewObjectSample</span>
00163       
00167       <a class="code" href="classstMAMViewObjectSample.html#a1">~stMAMViewObjectSample</a>();
00168 
<a name="l00178"></a><a class="code" href="classstMAMViewObjectSample.html#a2">00178</a>       <span class="keywordtype">bool</span> <a class="code" href="classstMAMViewObjectSample.html#a2">MayAdd</a>(){
00179          <span class="keywordflow">if</span> (Size &lt; MaxSize){
00180             <span class="keywordflow">return</span> <a class="code" href="group__util.html#a5">randomevent</a>(P);
00181          }<span class="keywordflow">else</span>{
00182             <span class="comment">// I'm full.</span>
00183             <span class="keywordflow">return</span> <span class="keyword">false</span>;
00184          }<span class="comment">//end if</span>
00185       }<span class="comment">//end AddThis</span>
00186    
<a name="l00193"></a><a class="code" href="classstMAMViewObjectSample.html#a3">00193</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewObjectSample.html#a3">Add</a>(ObjectType * obj){
00194          <span class="keywordflow">if</span> (Size &lt; MaxSize){
00195             Objs[Size] = obj;
00196             Size++;
00197          }<span class="comment">//end if</span>
00198       }<span class="comment">//end Add</span>
00199       
<a name="l00204"></a><a class="code" href="classstMAMViewObjectSample.html#a4">00204</a>       ObjectType ** <a class="code" href="classstMAMViewObjectSample.html#a4">GetObjects</a>(){
00205          <span class="keywordflow">return</span> Objs;
00206       }<span class="comment">//end GetObjects</span>
00207       
<a name="l00211"></a><a class="code" href="classstMAMViewObjectSample.html#a5">00211</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstMAMViewObjectSample.html#a5">GetSize</a>(){
00212          <span class="keywordflow">return</span> Size;
00213       }<span class="comment">//end GetSize</span>
00214       
<a name="l00218"></a><a class="code" href="classstMAMViewObjectSample.html#a6">00218</a>       <a class="code" href="group__types.html#a5">stSize</a> <a class="code" href="classstMAMViewObjectSample.html#a6">GetDesiredSampleSize</a>(){
00219          <span class="keywordflow">return</span> MaxSize;
00220       }<span class="comment">//end GetDesiredSampleSize</span>
00221    <span class="keyword">private</span>:
00225       <span class="keywordtype">double</span> P;
00226       
00230       <a class="code" href="group__types.html#a5">stSize</a> Size;
00231       
00235       <a class="code" href="group__types.html#a5">stSize</a> MaxSize;
00236       
00240       ObjectType ** Objs;
00241 };<span class="comment">//end class</span>
00242 
00243 <span class="comment">//-----------------------------------------------------------------------------</span>
00244 <span class="comment">// class stMAMViewExtractor</span>
00245 <span class="comment">//-----------------------------------------------------------------------------</span>
00254 <span class="comment"></span><span class="keyword">template</span> &lt;<span class="keyword">class</span> ObjectType, <span class="keyword">class</span> EvaluatorType&gt;
<a name="l00255"></a><a class="code" href="classstMAMViewExtractor.html">00255</a> <span class="keyword">class </span><a class="code" href="classstMAMViewExtractor.html">stMAMViewExtractor</a>{
00256    <span class="keyword">public</span>:
<a name="l00264"></a><a class="code" href="classstMAMViewExtractor.html#a0">00264</a>       <a class="code" href="classstMAMViewExtractor.html#a0">stMAMViewExtractor</a>(EvaluatorType * eval){
00265          Eval = eval;
00266          Serial = 0;
00267          Output = NULL;
00268          Mapper = NULL;
00269 
00270          <span class="comment">// First state.</span>
00271          StateStack.push(ST_DISABLE);
00272       }<span class="comment">//end EvaluatorType</span>
00273       
00274       <span class="keyword">virtual</span> <a class="code" href="classstMAMViewExtractor.html#a1">~stMAMViewExtractor</a>();
00275 
00283       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a2">Init</a>(<a class="code" href="classstMAMViewObjectSample.html">stMAMViewObjectSample&lt;ObjectType&gt;</a> * sample);
00284 
00294       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a3">BeginAnimation</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * title = NULL, <span class="keyword">const</span> <span class="keywordtype">char</span> * comment = NULL);
00295 
00300       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a4">EndAnimation</a>();
00301 
00308       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a5">BeginFrame</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * comment);
00309 
00315       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a6">EndFrame</a>();
00316 
00330       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a7">SetNode</a>(<a class="code" href="group__types.html#a4">stPageID</a> nodeID, ObjectType ** reps, <a class="code" href="group__types.html#a6">stDistance</a> * radii,
00331             <span class="keywordtype">int</span> n, <a class="code" href="group__types.html#a4">stPageID</a> parent, <span class="keywordtype">int</span> type, <span class="keywordtype">bool</span> active = <span class="keyword">false</span>);
00332 
<a name="l00344"></a><a class="code" href="classstMAMViewExtractor.html#a8">00344</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a7">SetNode</a>(<a class="code" href="group__types.html#a4">stPageID</a> nodeID, ObjectType * rep, <a class="code" href="group__types.html#a6">stDistance</a> radius,
00345             <a class="code" href="group__types.html#a4">stPageID</a> parent, <span class="keywordtype">int</span> type, <span class="keywordtype">bool</span> active = <span class="keyword">false</span>){
00346          <a class="code" href="classstMAMViewExtractor.html#a7">SetNode</a>(nodeID, &amp;rep, &amp;radius, 1, parent, type, active);
00347       }<span class="comment">//end SetNode</span>
00348 
00356       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a9">EnableNode</a>(<a class="code" href="group__types.html#a4">stPageID</a> nodeID);
00357 
00369       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a10">SetObject</a>(ObjectType * obj, <a class="code" href="group__types.html#a4">stPageID</a> parent, <span class="keywordtype">bool</span> active = <span class="keyword">false</span>);
00370 
00381       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a11">SetResult</a>(ObjectType * queryObj, stResult &lt;ObjectType&gt; * result,
00382             <a class="code" href="group__types.html#a7">stCount</a> k, <a class="code" href="group__types.html#a6">stDistance</a> radius);
00383 
<a name="l00394"></a><a class="code" href="classstMAMViewExtractor.html#a12">00394</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a11">SetResult</a>(ObjectType * queryObj, stResult &lt;ObjectType&gt; * result){
00395          <a class="code" href="classstMAMViewExtractor.html#a11">SetResult</a>(queryObj, result, K, Radius);
00396       }<span class="comment">//end SetResult</span>
00397       
<a name="l00406"></a><a class="code" href="classstMAMViewExtractor.html#a13">00406</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a13">SetSample</a>(ObjectType * queryObj){}
00407 
<a name="l00416"></a><a class="code" href="classstMAMViewExtractor.html#a14">00416</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a14">SetQueryInfo</a>(<span class="keywordtype">int</span> k, <a class="code" href="group__types.html#a6">stDistance</a> radius){
00417          K = k;
00418          Radius = radius;
00419       }<span class="comment">//end SetQueryInfo</span>
00420 
<a name="l00429"></a><a class="code" href="classstMAMViewExtractor.html#a15">00429</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a15">SetLevel</a>(<span class="keywordtype">int</span> level){
00430          Level = level;
00431       }<span class="comment">//end SetLevel</span>
00432 
<a name="l00440"></a><a class="code" href="classstMAMViewExtractor.html#a16">00440</a>       <span class="keywordtype">int</span> <a class="code" href="classstMAMViewExtractor.html#a16">GetLevel</a>(){
00441          <span class="keywordflow">return</span> Level;
00442       }<span class="comment">//end GetLevel</span>
00443 
<a name="l00451"></a><a class="code" href="classstMAMViewExtractor.html#a17">00451</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a17">LevelUp</a>(){
00452          Level++;
00453       }<span class="comment">//end LevelUp</span>
00454 
<a name="l00462"></a><a class="code" href="classstMAMViewExtractor.html#a18">00462</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a18">LevelDown</a>(){
00463          Level--;
00464       }<span class="comment">//end LevelDown</span>
00465 
00473       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a19">SetOutputDir</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * outputDir);
00474 
<a name="l00480"></a><a class="code" href="classstMAMViewExtractor.html#a20">00480</a>       <span class="keywordtype">void</span> <a class="code" href="classstMAMViewExtractor.html#a20">SetSerial</a>(<span class="keywordtype">int</span> serial){
00481          Serial = serial;
00482       }<span class="comment">//end SetSerial</span>
00483 
<a name="l00490"></a><a class="code" href="classstMAMViewExtractor.html#a21">00490</a>       <span class="keywordtype">int</span> <a class="code" href="classstMAMViewExtractor.html#a21">GetSerial</a>(){
00491          <span class="keywordflow">return</span> Serial;
00492       }<span class="comment">//end GetSerial</span>
00493 
00494    <span class="keyword">private</span>:
00495 
00499       <span class="keyword">typedef</span> stFastMapper &lt;ObjectType, EvaluatorType&gt; tMapper;
00500 
00504       <span class="keyword">enum</span> tStateIDs{
00505          ST_DISABLE = 0,
00506          ST_ANIMATION = 1,
00507          ST_FRAME = 2
00508       };<span class="comment">//end tEntityIDs</span>
00509 
00514       EvaluatorType * Eval;
00515 
00519       tMapper * Mapper;
00520 
00524       stack &lt;int&gt; StateStack;
00525 
00529       ostream * Output;
00530 
00534       string OutputDir;
00535 
00539       <span class="keywordtype">int</span> FrameCount;
00540 
00544       <span class="keywordtype">int</span> FrameElementCount;
00545 
00549       <span class="keywordtype">int</span> FrameResultCount;
00550 
00554       <span class="keywordtype">int</span> Serial;
00555 
00559       <span class="keywordtype">int</span> Level;
00560 
00564       <a class="code" href="group__types.html#a7">stCount</a> K;
00565 
00569       <a class="code" href="group__types.html#a6">stDistance</a> Radius;
00570 
00574       <span class="keywordtype">void</span> OpenNextXML();
00575 
00579       <span class="keywordtype">void</span> CloseXML();
00580 
00587       <span class="keywordtype">void</span> WriteXYZ(<span class="keywordtype">double</span> * map);      
00588 };<span class="comment">//end stMAMViewExtractor</span>
00589 
00590 <span class="preprocessor">#include &lt;arboretum/stMAMView.cc&gt;</span>
00591 
00592 <span class="preprocessor">#endif //__stMAMVIEW__</span>
00593 <span class="preprocessor"></span>
00594 <span class="preprocessor">#endif //__STMAMVIEW_H</span>
</pre></div><hr><address style="align: right;"><small>
Generated on Mon Mar 21 16:12:06 2005 for GBDI Arboretum by <a href="http://www.doxygen.org/index.html">Doxygen</a> 1.3.4</small><br>
Copyright &copy 2002-2003 GBDI-ICMC-USP
</address>
</body>
</html>
